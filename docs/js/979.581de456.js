"use strict";(self["webpackChunkzhiyuxinsheng"]=self["webpackChunkzhiyuxinsheng"]||[]).push([[979],{178:function(t,a,e){t.exports=e.p+"img/1-1.eaa93a9a.png"},403:function(t,a,e){t.exports=e.p+"img/2-3.e7e6ea17.png"},529:function(t,a,e){t.exports=e.p+"img/2-1.eaa93a9a.png"},902:function(t,a,e){t.exports=e.p+"img/5-1.eaa93a9a.png"},1145:function(t,a,e){t.exports=e.p+"img/1-2.e301c84e.png"},1546:function(t,a,e){t.exports=e.p+"img/2-2.ff769eac.png"},2214:function(t,a,e){t.exports=e.p+"img/3-3.a4c025b0.png"},2292:function(t,a,e){t.exports=e.p+"img/3-1.eaa93a9a.png"},2333:function(t,a,e){e.d(a,{O:function(){return l}});e(4114),e(8111),e(2489),e(116),e(1701);var n=e(2261),i=e(144),r=e(6768),o=e(3271),s=e(4300),d=e(1219);const l=(0,n.nY)("task",(()=>{const t=(0,i.KR)([]),a=(0,i.KR)([]),e=(0,i.KR)([]),n=(0,i.KR)(!1),l=(0,r.EW)((()=>t.value.filter((t=>!t.completed)))),h=async()=>{try{n.value=!0;const a=await s.WY.getTasks();t.value=a.tasks.filter((t=>!t.completed)),e.value=a.tasks.filter((t=>t.completed))}catch(a){d.nk.error("获取任务列表失败")}finally{n.value=!1}},u=async()=>{try{n.value=!0;const t=await s.WY.getSystemTasks();a.value=t.tasks}catch(t){d.nk.error("获取系统任务失败")}finally{n.value=!1}},c=async a=>{try{const e=!0===a.important||"true"===a.important,n=await s.WY.createTask({title:a.title,description:a.description||"",deadline:a.deadline||"",important:e});t.value.push(n.task),d.nk.success("任务创建成功")}catch(e){d.nk.error("创建任务失败")}},p=async a=>{try{await s.WY.completeTask(a);const n=t.value.find((t=>t._id===a));n&&(e.value.unshift({...n,completed:!0,completedAt:(new Date).toISOString()}),t.value=t.value.filter((t=>t._id!==a)));const i=(0,o.g)();if(i.plants&&i.plants.length>0){const t=i.plants.find((t=>t.isMainPlant));if(t){const a=t._id||t.id;if(a){const t=n&&n.important?50:25;await i.gainExperience(a,t),d.nk.success(`任务已完成，获得 ${t} 点经验值！`)}}}else d.nk.success("任务已完成")}catch(n){d.nk.error("完成任务失败")}},f=async t=>{try{const e=(0,o.g)();if(!e.currentPlant)return d.nk.warning("请先添加一个植物"),!1;const n=await s.WY.completeSystemTask(t),i=a.value.findIndex((a=>a._id===t));if(-1!==i&&(a.value[i].completed=!0),n.rewards)d.nk.success(`完成任务获得 ${n.rewards.experience} 点经验`);else{const t=e.currentPlant._id||e.currentPlant.id;if(t){const a=35;await e.gainExperience(t,a),d.nk.success(`完成系统任务获得 ${a} 点经验值`)}}return!0}catch(e){return 400===e.response?.status?d.nk.warning("今天已经完成过此任务"):d.nk.error("完成系统任务失败"),!1}},m=async a=>{try{if(!a)return void d.nk.error("任务ID无效，无法删除");await s.WY.deleteTask(a),t.value=t.value.filter((t=>t._id!==a)),d.nk.success("任务已删除")}catch(e){console.error("删除任务失败:",e),d.nk.error("删除任务失败")}},g=async t=>{try{if(!t)return void d.nk.error("任务ID无效，无法删除");await s.WY.deleteTask(t),e.value=e.value.filter((a=>a._id!==t)),d.nk.success("任务已删除")}catch(a){console.error("删除任务失败:",a),d.nk.error("删除任务失败")}},y=async a=>{try{const{_id:e,title:n,description:i,deadline:r,important:o}=a,l=!0===o||"true"===o,h=t.value.findIndex((t=>t._id===e));-1!==h&&t.value[h];-1!==h&&(t.value[h]={...t.value[h],title:n,description:i,deadline:r,important:l});const u=await s.WY.updateTask(e,{title:n,description:i,deadline:r,important:l});if(u&&u.task){const a=t.value.findIndex((t=>t._id===e));-1!==a&&(t.value[a]=u.task)}d.nk.success("任务已更新")}catch(e){console.error("更新任务失败:",e);const n=t.value.findIndex((t=>t._id===a._id));-1!==n&&originalTask&&(t.value[n]=originalTask),d.nk.error("更新任务失败")}},M=async a=>{const e=t.value.find((t=>t._id===a));if(e)try{console.log("切换任务重要性 - 当前状态:",e.important,"类型:",typeof e.important);const n=!0===e.important||"true"===e.important,i=!n;console.log("切换任务重要性 - 新状态:",i);const r=t.value.findIndex((t=>t._id===a));if(-1!==r){const a={...t.value[r],important:i};t.value[r]=a}const o=await s.WY.updateTask(a,{title:e.title,description:e.description,deadline:e.deadline,important:i});if(o&&o.task){const e=t.value.findIndex((t=>t._id===a));-1!==e&&(t.value[e]=o.task)}d.nk.success("任务已"+(i?"标记为重要":"取消重要标记"))}catch(n){console.error("更新任务重要性失败:",n);const i=t.value.findIndex((t=>t._id===a));-1!==i&&(t.value[i]={...t.value[i],important:e.important}),d.nk.error("更新任务重要性失败")}},v=a=>{if(!a||!Array.isArray(a))return;const e=a.map((t=>{const a=!0===t.important||"true"===t.important;return{...t,important:a}}));t.value=e};return{tasks:t,systemTasks:a,completedTasks:e,pendingTasks:l,loading:n,fetchTasks:h,fetchSystemTasks:u,addTask:c,completeTask:p,completeSystemTask:f,removeTask:m,removeCompletedTask:g,updateTask:y,toggleTaskImportance:M,reorderTasks:v}}))},2669:function(t,a,e){t.exports=e.p+"img/5-2.e26c060e.png"},3024:function(t,a,e){t.exports=e.p+"img/1-3.74393638.png"},3066:function(t,a,e){e.d(a,{B:function(){return M}});var n=e(8705),i=e(9369),r=e(3883),o=e(4156),s=e(4068);function d(t,a){const e=+(0,s.a)(t)-+(0,s.a)(a);return e<0?-1:e>0?1:e}var l=e(2436);function h(t,a,e){const[n,i]=(0,o.x)(e?.in,t,a),r=n.getFullYear()-i.getFullYear(),s=n.getMonth()-i.getMonth();return 12*r+s}function u(t,a){const e=(0,s.a)(t,a?.in);return e.setHours(23,59,59,999),e}function c(t,a){const e=(0,s.a)(t,a?.in),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function p(t,a){const e=(0,s.a)(t,a?.in);return+u(e,a)===+c(e,a)}function f(t,a,e){const[n,i,r]=(0,o.x)(e?.in,t,t,a),s=d(i,r),l=Math.abs(h(i,r));if(l<1)return 0;1===i.getMonth()&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-s*l);let u=d(i,r)===-s;p(n)&&1===l&&1===d(n,r)&&(u=!1);const c=s*(l-+u);return 0===c?0:c}function m(t){return a=>{const e=t?Math[t]:Math.trunc,n=e(a);return 0===n?0:n}}function g(t,a){return+(0,s.a)(t)-+(0,s.a)(a)}function y(t,a,e){const n=g(t,a)/1e3;return m(e?.roundingMethod)(n)}function M(t,a,e){const s=(0,i.q)(),h=e?.locale??s.locale??n.c,u=2520,c=d(t,a);if(isNaN(c))throw new RangeError("Invalid time value");const p=Object.assign({},e,{addSuffix:e?.addSuffix,comparison:c}),[m,g]=(0,o.x)(e?.in,...c>0?[a,t]:[t,a]),M=y(g,m),v=((0,r.G)(g)-(0,r.G)(m))/1e3,w=Math.round((M-v)/60);let b;if(w<2)return e?.includeSeconds?M<5?h.formatDistance("lessThanXSeconds",5,p):M<10?h.formatDistance("lessThanXSeconds",10,p):M<20?h.formatDistance("lessThanXSeconds",20,p):M<40?h.formatDistance("halfAMinute",0,p):M<60?h.formatDistance("lessThanXMinutes",1,p):h.formatDistance("xMinutes",1,p):0===w?h.formatDistance("lessThanXMinutes",1,p):h.formatDistance("xMinutes",w,p);if(w<45)return h.formatDistance("xMinutes",w,p);if(w<90)return h.formatDistance("aboutXHours",1,p);if(w<l.F6){const t=Math.round(w/60);return h.formatDistance("aboutXHours",t,p)}if(w<u)return h.formatDistance("xDays",1,p);if(w<l.Nw){const t=Math.round(w/l.F6);return h.formatDistance("xDays",t,p)}if(w<2*l.Nw)return b=Math.round(w/l.Nw),h.formatDistance("aboutXMonths",b,p);if(b=f(g,m),b<12){const t=Math.round(w/l.Nw);return h.formatDistance("xMonths",t,p)}{const t=b%12,a=Math.trunc(b/12);return t<3?h.formatDistance("aboutXYears",a,p):t<9?h.formatDistance("overXYears",a,p):h.formatDistance("almostXYears",a+1,p)}}},3107:function(t,a,e){t.exports=e.p+"img/4-2.b7d3c88c.png"},7243:function(t,a,e){t.exports=e.p+"img/4-1.eaa93a9a.png"},7593:function(t,a,e){t.exports=e.p+"img/4-3.2b85cb4d.png"},8665:function(t,a,e){e.d(a,{A:function(){return L},g:function(){return z}});const n={lessThanXSeconds:{one:"不到 1 秒",other:"不到 {{count}} 秒"},xSeconds:{one:"1 秒",other:"{{count}} 秒"},halfAMinute:"半分钟",lessThanXMinutes:{one:"不到 1 分钟",other:"不到 {{count}} 分钟"},xMinutes:{one:"1 分钟",other:"{{count}} 分钟"},xHours:{one:"1 小时",other:"{{count}} 小时"},aboutXHours:{one:"大约 1 小时",other:"大约 {{count}} 小时"},xDays:{one:"1 天",other:"{{count}} 天"},aboutXWeeks:{one:"大约 1 个星期",other:"大约 {{count}} 个星期"},xWeeks:{one:"1 个星期",other:"{{count}} 个星期"},aboutXMonths:{one:"大约 1 个月",other:"大约 {{count}} 个月"},xMonths:{one:"1 个月",other:"{{count}} 个月"},aboutXYears:{one:"大约 1 年",other:"大约 {{count}} 年"},xYears:{one:"1 年",other:"{{count}} 年"},overXYears:{one:"超过 1 年",other:"超过 {{count}} 年"},almostXYears:{one:"将近 1 年",other:"将近 {{count}} 年"}},i=(t,a,e)=>{let i;const r=n[t];return i="string"===typeof r?r:1===a?r.one:r.other.replace("{{count}}",String(a)),e?.addSuffix?e.comparison&&e.comparison>0?i+"内":i+"前":i};var r=e(9712);const o={full:"y'年'M'月'd'日' EEEE",long:"y'年'M'月'd'日'",medium:"yyyy-MM-dd",short:"yy-MM-dd"},s={full:"zzzz a h:mm:ss",long:"z a h:mm:ss",medium:"a h:mm:ss",short:"a h:mm"},d={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},l={date:(0,r.k)({formats:o,defaultWidth:"full"}),time:(0,r.k)({formats:s,defaultWidth:"full"}),dateTime:(0,r.k)({formats:d,defaultWidth:"full"})};var h=e(4156),u=e(860);function c(t,a,e){const[n,i]=(0,h.x)(e?.in,t,a);return+(0,u.k)(n,e)===+(0,u.k)(i,e)}function p(t,a,e){const n="eeee p";return c(t,a,e)?n:t.getTime()>a.getTime()?"'下个'"+n:"'上个'"+n}const f={lastWeek:p,yesterday:"'昨天' p",today:"'今天' p",tomorrow:"'明天' p",nextWeek:p,other:"PP p"},m=(t,a,e,n)=>{const i=f[t];return"function"===typeof i?i(a,e,n):i};var g=e(3022);const y={narrow:["前","公元"],abbreviated:["前","公元"],wide:["公元前","公元"]},M={narrow:["1","2","3","4"],abbreviated:["第一季","第二季","第三季","第四季"],wide:["第一季度","第二季度","第三季度","第四季度"]},v={narrow:["一","二","三","四","五","六","七","八","九","十","十一","十二"],abbreviated:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],wide:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]},w={narrow:["日","一","二","三","四","五","六"],short:["日","一","二","三","四","五","六"],abbreviated:["周日","周一","周二","周三","周四","周五","周六"],wide:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"]},b={narrow:{am:"上",pm:"下",midnight:"凌晨",noon:"午",morning:"早",afternoon:"下午",evening:"晚",night:"夜"},abbreviated:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"},wide:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"}},x={narrow:{am:"上",pm:"下",midnight:"凌晨",noon:"午",morning:"早",afternoon:"下午",evening:"晚",night:"夜"},abbreviated:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"},wide:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"}},k=(t,a)=>{const e=Number(t);switch(a?.unit){case"date":return e.toString()+"日";case"hour":return e.toString()+"时";case"minute":return e.toString()+"分";case"second":return e.toString()+"秒";default:return"第 "+e.toString()}},P={ordinalNumber:k,era:(0,g.o)({values:y,defaultWidth:"wide"}),quarter:(0,g.o)({values:M,defaultWidth:"wide",argumentCallback:t=>t-1}),month:(0,g.o)({values:v,defaultWidth:"wide"}),day:(0,g.o)({values:w,defaultWidth:"wide"}),dayPeriod:(0,g.o)({values:b,defaultWidth:"wide",formattingValues:x,defaultFormattingWidth:"wide"})};var S=e(3388),T=e(6660);const C=/^(第\s*)?\d+(日|时|分|秒)?/i,I=/\d+/i,W={narrow:/^(前)/i,abbreviated:/^(前)/i,wide:/^(公元前|公元)/i},D={any:[/^(前)/i,/^(公元)/i]},_={narrow:/^[1234]/i,abbreviated:/^第[一二三四]刻/i,wide:/^第[一二三四]刻钟/i},X={any:[/(1|一)/i,/(2|二)/i,/(3|三)/i,/(4|四)/i]},Y={narrow:/^(一|二|三|四|五|六|七|八|九|十[二一])/i,abbreviated:/^(一|二|三|四|五|六|七|八|九|十[二一]|\d|1[12])月/i,wide:/^(一|二|三|四|五|六|七|八|九|十[二一])月/i},A={narrow:[/^一/i,/^二/i,/^三/i,/^四/i,/^五/i,/^六/i,/^七/i,/^八/i,/^九/i,/^十(?!(一|二))/i,/^十一/i,/^十二/i],any:[/^一|1/i,/^二|2/i,/^三|3/i,/^四|4/i,/^五|5/i,/^六|6/i,/^七|7/i,/^八|8/i,/^九|9/i,/^十(?!(一|二))|10/i,/^十一|11/i,/^十二|12/i]},F={narrow:/^[一二三四五六日]/i,short:/^[一二三四五六日]/i,abbreviated:/^周[一二三四五六日]/i,wide:/^星期[一二三四五六日]/i},E={any:[/日/i,/一/i,/二/i,/三/i,/四/i,/五/i,/六/i]},R={any:/^(上午?|下午?|午夜|[中正]午|早上?|下午|晚上?|凌晨|)/i},B={any:{am:/^上午?/i,pm:/^下午?/i,midnight:/^午夜/i,noon:/^[中正]午/i,morning:/^早上/i,afternoon:/^下午/i,evening:/^晚上?/i,night:/^凌晨/i}},$={ordinalNumber:(0,T.K)({matchPattern:C,parsePattern:I,valueCallback:t=>parseInt(t,10)}),era:(0,S.A)({matchPatterns:W,defaultMatchWidth:"wide",parsePatterns:D,defaultParseWidth:"any"}),quarter:(0,S.A)({matchPatterns:_,defaultMatchWidth:"wide",parsePatterns:X,defaultParseWidth:"any",valueCallback:t=>t+1}),month:(0,S.A)({matchPatterns:Y,defaultMatchWidth:"wide",parsePatterns:A,defaultParseWidth:"any"}),day:(0,S.A)({matchPatterns:F,defaultMatchWidth:"wide",parsePatterns:E,defaultParseWidth:"any"}),dayPeriod:(0,S.A)({matchPatterns:R,defaultMatchWidth:"any",parsePatterns:B,defaultParseWidth:"any"})},z={code:"zh-CN",formatDistance:i,formatLong:l,formatRelative:m,localize:P,match:$,options:{weekStartsOn:1,firstWeekContainsDate:4}};var L=z},9104:function(t,a,e){e.d(a,{A:function(){return u}});var n=e(6768),i=e(4232);const r={class:"dialog-bubble"},o={class:"dialog-text"},s={key:0,class:"dialog-buttons"};var d={__name:"PlantDialog",props:{text:{type:String,required:!0},isVisible:{type:Boolean,default:!1},showButtons:{type:Boolean,default:!1},primaryButtonText:{type:String,default:"确定"},secondaryButtonText:{type:String,default:"取消"}},emits:["primary-action","secondary-action"],setup(t){return(a,e)=>{const d=(0,n.g2)("el-button");return(0,n.uX)(),(0,n.CE)("div",{class:(0,i.C4)(["plant-dialog",{show:t.isVisible}])},[(0,n.Lk)("div",r,[(0,n.Lk)("p",o,(0,i.v_)(t.text),1),t.showButtons?((0,n.uX)(),(0,n.CE)("div",s,[(0,n.bF)(d,{size:"small",type:"primary",onClick:e[0]||(e[0]=t=>a.$emit("primary-action"))},{default:(0,n.k6)((()=>[(0,n.eW)((0,i.v_)(t.primaryButtonText),1)])),_:1}),(0,n.bF)(d,{size:"small",onClick:e[1]||(e[1]=t=>a.$emit("secondary-action"))},{default:(0,n.k6)((()=>[(0,n.eW)((0,i.v_)(t.secondaryButtonText),1)])),_:1})])):(0,n.Q3)("",!0)]),e[2]||(e[2]=(0,n.Lk)("div",{class:"dialog-tail"},null,-1))],2)}}},l=e(1241);const h=(0,l.A)(d,[["__scopeId","data-v-ac86cebe"]]);var u=h},9151:function(t,a,e){t.exports=e.p+"img/3-2.57f7796f.png"},9428:function(t,a,e){t.exports=e.p+"img/5-3.d4662e32.png"},9523:function(t,a,e){e.d(a,{A:function(){return d}});e(4114),e(8111),e(7588);var n=e(6768),i=e(144),r={__name:"WeatherCanvas",props:{weather:{type:String,required:!0,default:"sunny",validator:t=>["sunny","rainy","cloudy"].includes(t)},width:{type:Number,default:300},height:{type:Number,default:300}},setup(t){const a=t,e=(0,i.KR)(null);let r=null,o=null,s=[],d=null;const l=()=>{if(!e.value)return;const t=window.devicePixelRatio||1;r=e.value.getContext("2d"),e.value.width=a.width*t,e.value.height=a.height*t,r.scale(t,t),s=[],h(),"rainy"===a.weather?u():"sunny"===a.weather?c():"cloudy"===a.weather&&p(),w()},h=()=>{"sunny"===a.weather?(d=r.createLinearGradient(0,0,0,a.height),d.addColorStop(0,"rgba(135, 206, 250, 0.3)"),d.addColorStop(1,"rgba(135, 206, 250, 0)")):"rainy"===a.weather?(d=r.createLinearGradient(0,0,0,a.height),d.addColorStop(0,"rgba(105, 105, 105, 0.2)"),d.addColorStop(1,"rgba(105, 105, 105, 0)")):"cloudy"===a.weather&&(d=r.createLinearGradient(0,0,0,a.height),d.addColorStop(0,"rgba(200, 200, 200, 0.2)"),d.addColorStop(1,"rgba(200, 200, 200, 0)"))},u=()=>{const t=180;for(let e=0;e<t;e++){const t=Math.random()>.9;t?s.push({type:"splash",x:Math.random()*a.width,y:a.height-10,radius:3*Math.random()+1,speedX:3*Math.random()-1.5,speedY:5*-Math.random()-2,gravity:.2,life:30*Math.random()+30,opacity:.7}):s.push({type:"raindrop",x:Math.random()*a.width,y:Math.random()*a.height-a.height,length:20*Math.random()+10,speed:12*Math.random()+8,thickness:1.8*Math.random()+.5,windOffset:.5*Math.sin(Math.random()*Math.PI)})}},c=()=>{s.push({type:"sun",x:.75*a.width,y:.25*a.height,radius:.1*a.width,rayLength:.08*a.width,rayCount:12,rotation:0,rotationSpeed:.002,pulse:0,pulseSpeed:.03});for(let t=0;t<40;t++)s.push({type:"sparkle",x:Math.random()*a.width,y:Math.random()*a.height,radius:3*Math.random()+1,alpha:.5*Math.random()+.3,speed:.5*Math.random()+.2,pulse:Math.random()*Math.PI*2});for(let t=0;t<3;t++)s.push({type:"smallCloud",x:Math.random()*a.width,y:Math.random()*(.4*a.height),radius:20*Math.random()+15,speed:.3*Math.random()+.1,opacity:.2*Math.random()+.1})},p=()=>{for(let t=0;t<5;t++)s.push({type:"bigCloud",x:Math.random()*a.width*1.5-.25*a.width,y:Math.random()*(.6*a.height),radius:60*Math.random()+40,speed:.4*Math.random()+.1,opacity:.5*Math.random()+.4,details:Math.floor(3*Math.random())+3});for(let t=0;t<8;t++)s.push({type:"smallCloud",x:Math.random()*a.width*1.5-.25*a.width,y:Math.random()*(.8*a.height),radius:30*Math.random()+15,speed:.6*Math.random()+.2,opacity:.4*Math.random()+.2})},f=()=>{r.clearRect(0,0,a.width,a.height),r.fillStyle=d,r.fillRect(0,0,a.width,a.height),s.forEach(((t,e)=>{if("raindrop"===t.type){const e=Math.min(1,t.speed/15);if(r.strokeStyle=`rgba(174, 194, 224, ${e})`,r.lineCap="round",r.beginPath(),r.lineWidth=t.thickness,r.moveTo(t.x,t.y),r.lineTo(t.x+t.windOffset,t.y+t.length),r.stroke(),t.y+=t.speed,t.x+=.5*t.windOffset,t.y>a.height){if(Math.random()>.7)for(let e=0;e<3;e++)s.push({type:"splash",x:t.x,y:a.height-5,radius:2*Math.random()+1,speedX:3*Math.random()-1.5,speedY:3*-Math.random()-2,gravity:.15,life:20*Math.random()+10,opacity:.7});t.y=-t.length,t.x=Math.random()*a.width,t.windOffset=.5*Math.sin(Math.random()*Math.PI)}}else"splash"===t.type&&(r.fillStyle=`rgba(174, 194, 224, ${t.opacity})`,r.beginPath(),r.arc(t.x,t.y,t.radius,0,2*Math.PI),r.fill(),t.x+=t.speedX,t.y+=t.speedY,t.speedY+=t.gravity,t.life--,t.opacity=t.life/40,t.life<=0&&s.splice(e,1))}))},m=()=>{r.clearRect(0,0,a.width,a.height),r.fillStyle=d,r.fillRect(0,0,a.width,a.height),s.forEach(((t,e)=>{if("sun"===t.type){const a=t;a.pulse+=a.pulseSpeed;const e=r.createRadialGradient(a.x,a.y,.5*a.radius,a.x,a.y,3.5*a.radius);e.addColorStop(0,"rgba(255, 220, 130, 0.3)"),e.addColorStop(.5,"rgba(255, 210, 100, 0.15)"),e.addColorStop(1,"rgba(255, 210, 100, 0)"),r.fillStyle=e,r.beginPath(),r.arc(a.x,a.y,3.5*a.radius,0,2*Math.PI),r.fill();const n=1+.05*Math.sin(.5*a.pulse),i=r.createRadialGradient(a.x,a.y,.2*a.radius,a.x,a.y,2*a.radius*n);i.addColorStop(0,"rgba(255, 220, 130, 0.7)"),i.addColorStop(.5,"rgba(255, 190, 80, 0.3)"),i.addColorStop(1,"rgba(255, 180, 80, 0)"),r.fillStyle=i,r.beginPath(),r.arc(a.x,a.y,2*a.radius*n,0,2*Math.PI),r.fill();const o=a.x-.3*a.radius,s=a.y-.3*a.radius,d=r.createRadialGradient(o,s,0,a.x,a.y,a.radius);d.addColorStop(0,"#FFF8E1"),d.addColorStop(.4,"#FFECB3"),d.addColorStop(.8,"#FFD54F"),d.addColorStop(1,"#FFB300"),r.fillStyle=d,r.beginPath(),r.arc(a.x,a.y,a.radius,0,2*Math.PI),r.fill(),r.strokeStyle="rgba(255, 213, 79, 0.7)";for(let t=0;t<a.rayCount;t++){const e=t*(2*Math.PI)/a.rayCount+a.rotation,n=a.rayLength*(.85+.15*Math.sin(.8*a.pulse+.3*t)),i=a.x+Math.cos(e)*(a.radius+2),o=a.y+Math.sin(e)*(a.radius+2),s=a.x+Math.cos(e)*(a.radius+n),d=a.y+Math.sin(e)*(a.radius+n);r.lineWidth=2+1.5*Math.sin(a.pulse+.5*t),r.globalAlpha=.7+.2*Math.sin(a.pulse+.3*t),r.beginPath(),r.moveTo(i,o),r.lineTo(s,d),r.stroke()}r.strokeStyle="rgba(255, 213, 79, 0.5)",r.lineWidth=1.5;for(let t=0;t<2*a.rayCount;t++){const e=t*(2*Math.PI)/(2*a.rayCount)+1.5*a.rotation,n=.4*a.rayLength*(.7+.3*Math.sin(1.2*a.pulse+.5*t)),i=a.x+Math.cos(e)*(a.radius+2),o=a.y+Math.sin(e)*(a.radius+2),s=a.x+Math.cos(e)*(a.radius+n),d=a.y+Math.sin(e)*(a.radius+n);r.globalAlpha=.2+.2*Math.cos(.8*a.pulse+t),r.beginPath(),r.moveTo(i,o),r.lineTo(s,d),r.stroke()}r.fillStyle="rgba(255, 230, 160, 0.3)";for(let t=0;t<8;t++){const e=t*(2*Math.PI)/8+.7*a.rotation,n=a.radius*(1.6+.15*Math.sin(.9*a.pulse)),i=a.x+Math.cos(e)*n,o=a.y+Math.sin(e)*n,s=a.x+Math.cos(e+.2)*(.7*n),d=a.y+Math.sin(e+.2)*(.7*n),l=a.x+Math.cos(e-.2)*(.7*n),h=a.y+Math.sin(e-.2)*(.7*n);r.globalAlpha=.15+.1*Math.sin(a.pulse+.7*t),r.beginPath(),r.moveTo(i,o),r.lineTo(s,d),r.lineTo(l,h),r.closePath(),r.fill()}r.fillStyle="rgba(255, 250, 230, 0.7)";for(let t=0;t<3;t++){const e=2*a.rotation+t*Math.PI/2.5,n=.5*a.radius*Math.random(),i=a.x+Math.cos(e)*n,o=a.y+Math.sin(e)*n,s=a.radius*(.04+.06*Math.random());r.globalAlpha=.2+.3*Math.random(),r.beginPath(),r.arc(i,o,s,0,2*Math.PI),r.fill()}r.globalAlpha=1,a.rotation+=a.rotationSpeed*(1+.1*Math.sin(.3*a.pulse))}else if("sparkle"===t.type){const e=t;e.pulse+=.08+.02*Math.random();const n=.5+.5*Math.sin(e.pulse);Math.random()>.97?(r.fillStyle=`rgba(255, 255, 250, ${1.5*e.alpha})`,r.shadowColor="rgba(255, 255, 200, 0.8)",r.shadowBlur=5):(r.fillStyle=`rgba(255, 255, 220, ${e.alpha*n})`,r.shadowBlur=0),r.beginPath(),r.arc(e.x,e.y,e.radius*(.8+.4*n),0,2*Math.PI),r.fill(),r.shadowBlur=0,e.y+=e.speed,e.x+=.3*Math.sin(.2*e.pulse),e.y>a.height&&(e.y=0,e.x=Math.random()*a.width)}else"smallCloud"===t.type&&(y(t.x,t.y,t.radius,t.opacity),t.x+=t.speed,t.x>a.width+t.radius&&(t.x=2*-t.radius,t.y=Math.random()*(a.height/2)))}))},g=()=>{r.clearRect(0,0,a.width,a.height),r.fillStyle=d,r.fillRect(0,0,a.width,a.height),s.sort(((t,a)=>t.radius-a.radius)),s.forEach((t=>{"bigCloud"===t.type?M(t.x,t.y,t.radius,t.opacity,t.details):y(t.x,t.y,t.radius,t.opacity),t.x+=t.speed,t.x>a.width+t.radius&&(t.x=2*-t.radius,t.y=Math.random()*(.6*a.height),t.radius="bigCloud"===t.type?60*Math.random()+40:30*Math.random()+15)}))},y=(t,a,e,n)=>{r.fillStyle=`rgba(220, 220, 220, ${n})`,r.beginPath(),r.arc(t,a,.5*e,0,2*Math.PI),r.arc(t+.35*e,a-.2*e,.4*e,0,2*Math.PI),r.arc(t+.75*e,a,.45*e,0,2*Math.PI),r.arc(t+.4*e,a+.2*e,.35*e,0,2*Math.PI),r.fill(),r.fillStyle=`rgba(250, 250, 250, ${.6*n})`,r.beginPath(),r.arc(t,a-.12*e,.35*e,0,2*Math.PI),r.arc(t+.35*e,a-.3*e,.25*e,0,2*Math.PI),r.fill()},M=(t,a,e,n,i)=>{r.fillStyle=`rgba(180, 180, 180, ${.5*n})`,r.beginPath(),r.arc(t+5,a+5,.6*e,0,2*Math.PI),r.arc(t+.35*e+5,a-.2*e+5,.5*e,0,2*Math.PI),r.arc(t+.75*e+5,a+5,.55*e,0,2*Math.PI),r.fill(),r.fillStyle=`rgba(220, 220, 220, ${n})`,r.beginPath(),r.arc(t,a,.6*e,0,2*Math.PI),r.arc(t+.35*e,a-.2*e,.5*e,0,2*Math.PI),r.arc(t+.75*e,a,.55*e,0,2*Math.PI),r.arc(t+.4*e,a+.3*e,.45*e,0,2*Math.PI);for(let o=0;o<i;o++){const n=Math.cos(o*Math.PI/4)*e*.6,i=Math.sin(o*Math.PI/4)*e*.4;r.arc(t+n,a+i,.3*e,0,2*Math.PI)}r.fill(),r.fillStyle=`rgba(250, 250, 250, ${.7*n})`,r.beginPath(),r.arc(t,a-.15*e,.4*e,0,2*Math.PI),r.arc(t+.35*e,a-.35*e,.3*e,0,2*Math.PI),r.fill()},v=()=>{"rainy"===a.weather?f():"sunny"===a.weather?m():"cloudy"===a.weather&&g(),o=requestAnimationFrame(v)},w=()=>{o&&cancelAnimationFrame(o),v()};return(0,n.wB)((()=>a.weather),(t=>{o&&cancelAnimationFrame(o),s=[],h(),"rainy"===t?u():"sunny"===t?c():"cloudy"===t&&p(),w()})),(0,n.sV)((()=>{l(),window.addEventListener("resize",l)})),(0,n.hi)((()=>{o&&cancelAnimationFrame(o),window.removeEventListener("resize",l)})),(t,a)=>((0,n.uX)(),(0,n.CE)("canvas",{ref_key:"canvas",ref:e,class:"weather-canvas"},null,512))}},o=e(1241);const s=(0,o.A)(r,[["__scopeId","data-v-5cceed66"]]);var d=s}}]);
//# sourceMappingURL=979.581de456.js.map