{"version":3,"file":"js/147.4af11bbb.js","mappings":"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","sources":["webpack://zhiyuxinsheng/./src/views/ResetPassword.vue","webpack://zhiyuxinsheng/./src/views/ResetPassword.vue?9dd8"],"sourcesContent":["<template>\n  <div class=\"reset-container\">\n    <div class=\"reset-card\">\n      <div class=\"reset-header\">\n        <div class=\"app-logo\">\n          <el-icon class=\"logo-icon\"><Sunny /></el-icon>\n          <h1>植物日记</h1>\n        </div>\n        <p class=\"reset-subtitle\">重置您的账户密码</p>\n      </div>\n      \n      <div class=\"reset-form\">\n        <p class=\"instruction\">请设置您的新密码。密码应至少为6个字符，并包含数字和字母。</p>\n        \n        <el-form \n          ref=\"resetForm\" \n          :model=\"resetForm\" \n          :rules=\"rules\" \n          label-position=\"top\"\n          @keyup.enter=\"handleSubmit\"\n        >\n          <el-form-item label=\"新密码\" prop=\"password\">\n            <el-input \n              v-model=\"resetForm.password\" \n              type=\"password\" \n              placeholder=\"请输入新密码\" \n              prefix-icon=\"Lock\"\n              show-password\n              clearable\n            />\n          </el-form-item>\n          \n          <el-form-item label=\"确认新密码\" prop=\"confirmPassword\">\n            <el-input \n              v-model=\"resetForm.confirmPassword\" \n              type=\"password\" \n              placeholder=\"请再次输入新密码\" \n              prefix-icon=\"Lock\"\n              show-password\n              clearable\n            />\n          </el-form-item>\n          \n          <el-form-item>\n            <el-button \n              type=\"primary\" \n              class=\"submit-button\" \n              :loading=\"authStore.loading\"\n              @click=\"handleSubmit\"\n            >\n              重置密码\n            </el-button>\n          </el-form-item>\n        </el-form>\n        \n        <div class=\"back-link\">\n          <router-link to=\"/login\">\n            <el-icon><Back /></el-icon> 返回登录页\n          </router-link>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref, reactive } from 'vue'\nimport { useRouter, useRoute } from 'vue-router'\nimport { useAuthStore } from '../stores/auth'\nimport { Sunny, Lock, Back } from '@element-plus/icons-vue'\nimport { ElMessage } from 'element-plus'\n\nexport default {\n  name: 'ResetPasswordPage',\n  components: {\n    Sunny,\n    Lock,\n    Back\n  },\n  setup() {\n    const router = useRouter()\n    const route = useRoute()\n    const authStore = useAuthStore()\n    const resetForm = ref(null)\n    \n    // 从路由参数中获取重置令牌\n    const token = route.params.token\n    \n    const formData = reactive({\n      password: '',\n      confirmPassword: ''\n    })\n    \n    // 验证密码是否一致\n    const validatePass2 = (rule, value, callback) => {\n      if (value === '') {\n        callback(new Error('请再次输入密码'))\n      } else if (value !== formData.password) {\n        callback(new Error('两次输入密码不一致'))\n      } else {\n        callback()\n      }\n    }\n    \n    const rules = {\n      password: [\n        { required: true, message: '请输入新密码', trigger: 'blur' },\n        { min: 6, message: '密码长度至少为6个字符', trigger: 'blur' }\n      ],\n      confirmPassword: [\n        { required: true, validator: validatePass2, trigger: 'blur' }\n      ]\n    }\n    \n    const handleSubmit = async () => {\n      if (!resetForm.value) return\n      \n      if (!token) {\n        ElMessage.error('无效的重置链接，请重新获取')\n        router.push('/forgot-password')\n        return\n      }\n      \n      await resetForm.value.validate(async (valid) => {\n        if (valid) {\n          try {\n            await authStore.resetPassword({\n              token,\n              password: formData.password\n            })\n            \n            // 成功重置后提示用户\n            ElMessage.success('密码已成功重置，请使用新密码登录！')\n            \n            // 短暂延迟后跳转到登录页\n            setTimeout(() => {\n              router.push('/login')\n            }, 2000)\n          } catch (error) {\n            // 错误已在authStore中处理\n            console.error('重置密码失败:', error)\n          }\n        } else {\n          ElMessage.warning('请正确填写密码信息')\n          return false\n        }\n      })\n    }\n    \n    return {\n      resetForm,\n      resetForm: formData,\n      rules,\n      authStore,\n      handleSubmit\n    }\n  }\n}\n</script>\n\n<style scoped>\n.reset-container {\n  display: flex;\n  min-height: 100vh;\n  background-color: #f5f7fa;\n  position: relative;\n  overflow: hidden;\n}\n\n.reset-card {\n  width: 100%;\n  max-width: 450px;\n  margin: auto;\n  padding: 40px;\n  background-color: #fff;\n  border-radius: 16px;\n  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.05);\n  z-index: 2;\n  position: relative;\n}\n\n.reset-header {\n  text-align: center;\n  margin-bottom: 30px;\n}\n\n.app-logo {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-bottom: 20px;\n}\n\n.logo-icon {\n  font-size: 48px;\n  color: #4caf50;\n  margin-bottom: 10px;\n}\n\n.app-logo h1 {\n  font-size: 28px;\n  color: #333;\n  margin: 0;\n  font-weight: 600;\n}\n\n.reset-subtitle {\n  color: #666;\n  font-size: 16px;\n  margin: 0;\n}\n\n.reset-form {\n  margin-top: 20px;\n}\n\n.instruction {\n  color: #666;\n  margin-bottom: 30px;\n  line-height: 1.6;\n}\n\n.submit-button {\n  width: 100%;\n  height: 44px;\n  font-size: 16px;\n  border-radius: 8px;\n  background: linear-gradient(135deg, #4caf50, #2e7d32);\n  border: none;\n}\n\n.back-link {\n  text-align: center;\n  margin-top: 30px;\n}\n\n.back-link a {\n  display: inline-flex;\n  align-items: center;\n  color: #4caf50;\n  text-decoration: none;\n  font-size: 14px;\n}\n\n.back-link a:hover {\n  text-decoration: underline;\n}\n\n.back-link .el-icon {\n  margin-right: 5px;\n}\n\n.reset-decoration {\n  position: fixed;\n  top: -20px;\n  left: -20px;\n  width: 50%;\n  max-width: 700px;\n  opacity: 0.5;\n  z-index: 1;\n}\n\n.reset-decoration img {\n  width: 100%;\n  height: auto;\n}\n\n@media (max-width: 768px) {\n  .reset-card {\n    max-width: 100%;\n    border-radius: 0;\n    box-shadow: none;\n    padding: 30px 20px;\n  }\n  \n  .reset-decoration {\n    display: none;\n  }\n}\n</style> ","import { render } from \"./ResetPassword.vue?vue&type=template&id=ff66de68&scoped=true\"\nimport script from \"./ResetPassword.vue?vue&type=script&lang=js\"\nexport * from \"./ResetPassword.vue?vue&type=script&lang=js\"\n\nimport \"./ResetPassword.vue?vue&type=style&index=0&id=ff66de68&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-ff66de68\"]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","_createVNode","_component_el_icon","_component_Sunny","_hoisted_5","_component_el_form","ref","model","$setup","resetForm","rules","onKeyup","_withKeys","handleSubmit","_component_el_form_item","label","prop","_component_el_input","password","$event","type","placeholder","clearable","confirmPassword","_component_el_button","loading","authStore","onClick","_cache","_hoisted_6","_component_router_link","to","_component_Back","name","components","Sunny","Lock","Back","setup","router","useRouter","route","useRoute","useAuthStore","token","params","formData","reactive","validatePass2","rule","value","callback","Error","required","message","trigger","min","validator","async","validate","valid","ElMessage","warning","resetPassword","success","setTimeout","push","error","console","__exports__","render"],"sourceRoot":""}