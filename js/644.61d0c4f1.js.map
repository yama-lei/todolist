{"version":3,"file":"js/644.61d0c4f1.js","mappings":"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","sources":["webpack://zhiyuxinsheng/./src/services/ossApi.js","webpack://zhiyuxinsheng/./src/stores/post.js","webpack://zhiyuxinsheng/./src/components/TimeLinePage.vue","webpack://zhiyuxinsheng/./src/components/TimeLinePage.vue?9cfd","webpack://zhiyuxinsheng/./src/views/Posts.vue","webpack://zhiyuxinsheng/./src/views/Posts.vue?709c"],"sourcesContent":["import api from './api';\nimport axios from 'axios';\n\n// OSSÊìç‰ΩúÁõ∏ÂÖ≥API\nconst ossApi = {\n  /**\n   * Ëé∑ÂèñOSSÈÖçÁΩÆÔºà‰∏¥Êó∂Âá≠ËØÅÔºâ\n   * @returns {Promise<Object>} OSSÈÖçÁΩÆ‰ø°ÊÅØ\n   */\n  getOSSConfig() {\n    return api.get('/oss/config');\n  },\n\n  /**\n   * Ëé∑ÂèñOSS‰∏ä‰º†Á≠ñÁï•ÔºàPolicyÔºâ\n   * @param {string} dir ‰∏ä‰º†ÁõÆÂΩï\n   * @returns {Promise<Object>} ‰∏ä‰º†Á≠ñÁï•\n   */\n  getOSSPolicy(dir = 'posts/') {\n    return api.get('/oss/policy', { params: { dir } });\n  },\n\n  /**\n   * Áõ¥Êé•‰∏ä‰º†Êñá‰ª∂Âà∞ÈòøÈáå‰∫ëOSS\n   * @param {File} file Ë¶Å‰∏ä‰º†ÁöÑÊñá‰ª∂ÂØπË±°\n   * @param {string} dir ‰∏ä‰º†ÁõÆÂΩï\n   * @returns {Promise<string>} Êñá‰ª∂ÁöÑURL\n   */\n  async uploadFile(file, dir = 'posts/') {\n    try {\n      // 1. Ëé∑Âèñ‰∏ä‰º†Á≠ñÁï•\n      const policyRes = await this.getOSSPolicy(dir);\n      const policy = policyRes.policy;\n      \n      if (!policy) {\n        throw new Error('Ëé∑Âèñ‰∏ä‰º†Á≠ñÁï•Â§±Ë¥•');\n      }\n      \n      // Ê£ÄÊü•Âπ∂Â§ÑÁêÜhostÔºåÁ°Æ‰øùÊòØ‰∏Ä‰∏™ÊúâÊïàÁöÑURLÂ≠óÁ¨¶‰∏≤\n      let host = policy.host;\n      if (typeof host === 'object') {\n        console.error('Host ÊòØ‰∏Ä‰∏™ÂØπË±°ËÄå‰∏çÊòØÂ≠óÁ¨¶‰∏≤:', host);\n        // Â∞ùËØï‰ªéÂØπË±°‰∏≠Ëé∑ÂèñURLÔºåÊàñËÄÖÊûÑÂª∫‰∏Ä‰∏™ÈªòËÆ§URL\n        host = `https://${policy.bucket}.${policy.region}.aliyuncs.com`;\n      }\n      \n      // Á°Æ‰øùhostÊòØ‰∏Ä‰∏™ÊúâÊïàÁöÑURLÂ≠óÁ¨¶‰∏≤\n      if (!host.startsWith('http')) {\n        host = `https://${host}`;\n      }\n      \n      // 2. ÂáÜÂ§áË°®ÂçïÊï∞ÊçÆ\n      const formData = new FormData();\n      const key = `${policy.key}${file.name.substring(file.name.lastIndexOf('.'))}`;\n      \n      formData.append('key', key);\n      formData.append('OSSAccessKeyId', policy.accessKeyId);\n      formData.append('policy', policy.policyBase64);\n      formData.append('signature', policy.signature);\n      formData.append('success_action_status', '200');\n      formData.append('file', file);\n      \n      console.log('Ê≠£Âú®‰∏ä‰º†Êñá‰ª∂Âà∞:', host);\n      \n      // 3. ‰∏ä‰º†Êñá‰ª∂Âà∞OSS\n      await axios.post(host, formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      \n      // 4. ËøîÂõûÊñá‰ª∂URL\n      let cdnHost = policy.cdnHost || host;\n      if (typeof cdnHost === 'object') {\n        cdnHost = host; // Â¶ÇÊûúcdnHost‰πüÊòØÂØπË±°ÔºåÂàô‰ΩøÁî®host\n      }\n      \n      // Á°Æ‰øùURLÊ†ºÂºèÊ≠£Á°Æ\n      const fileUrl = `${cdnHost}/${key}`;\n      console.log('Êñá‰ª∂‰∏ä‰º†ÊàêÂäüÔºåURL:', fileUrl);\n      \n      return fileUrl;\n    } catch (error) {\n      console.error('‰∏ä‰º†Êñá‰ª∂Âà∞OSSÂ§±Ë¥•:', error);\n      throw error;\n    }\n  },\n  \n  /**\n   * ÊâπÈáè‰∏ä‰º†Êñá‰ª∂Âà∞ÈòøÈáå‰∫ëOSS\n   * @param {Array<File>} files Ë¶Å‰∏ä‰º†ÁöÑÊñá‰ª∂ÂØπË±°Êï∞ÁªÑ\n   * @param {string} dir ‰∏ä‰º†ÁõÆÂΩï\n   * @returns {Promise<Array<string>>} Êñá‰ª∂URLÊï∞ÁªÑ\n   */\n  async uploadMultipleFiles(files, dir = 'posts/') {\n    if (!files || files.length === 0) {\n      return [];\n    }\n    \n    try {\n      // ÂêåÊó∂Ëé∑Âèñ‰∏ÄÊ¨°‰∏ä‰º†Á≠ñÁï•\n      const policyRes = await this.getOSSPolicy(dir);\n      const policy = policyRes.policy;\n      \n      if (!policy) {\n        throw new Error('Ëé∑Âèñ‰∏ä‰º†Á≠ñÁï•Â§±Ë¥•');\n      }\n      \n      // Ê£ÄÊü•Âπ∂Â§ÑÁêÜhostÔºåÁ°Æ‰øùÊòØ‰∏Ä‰∏™ÊúâÊïàÁöÑURLÂ≠óÁ¨¶‰∏≤\n      let host = policy.host;\n      if (typeof host === 'object') {\n        console.error('Host ÊòØ‰∏Ä‰∏™ÂØπË±°ËÄå‰∏çÊòØÂ≠óÁ¨¶‰∏≤:', host);\n        // Â∞ùËØï‰ªéÂØπË±°‰∏≠Ëé∑ÂèñURLÔºåÊàñËÄÖÊûÑÂª∫‰∏Ä‰∏™ÈªòËÆ§URL\n        host = `https://${policy.bucket}.${policy.region}.aliyuncs.com`;\n      }\n      \n      // Á°Æ‰øùhostÊòØ‰∏Ä‰∏™ÊúâÊïàÁöÑURLÂ≠óÁ¨¶‰∏≤\n      if (!host.startsWith('http')) {\n        host = `https://${host}`;\n      }\n      \n      console.log('ÂáÜÂ§áÊâπÈáè‰∏ä‰º†Êñá‰ª∂Âà∞:', host);\n      \n      // Âπ∂Ë°å‰∏ä‰º†ÊâÄÊúâÊñá‰ª∂\n      const uploadPromises = files.map(async (file, index) => {\n        try {\n          const formData = new FormData();\n          const key = `${policy.key}-${index}${file.name.substring(file.name.lastIndexOf('.'))}`;\n          \n          formData.append('key', key);\n          formData.append('OSSAccessKeyId', policy.accessKeyId);\n          formData.append('policy', policy.policyBase64);\n          formData.append('signature', policy.signature);\n          formData.append('success_action_status', '200');\n          formData.append('file', file);\n          \n          await axios.post(host, formData, {\n            headers: {\n              'Content-Type': 'multipart/form-data'\n            }\n          });\n          \n          // Â§ÑÁêÜËøîÂõûURL\n          let cdnHost = policy.cdnHost || host;\n          if (typeof cdnHost === 'object') {\n            cdnHost = host; // Â¶ÇÊûúcdnHost‰πüÊòØÂØπË±°ÔºåÂàô‰ΩøÁî®host\n          }\n          \n          const fileUrl = `${cdnHost}/${key}`;\n          console.log(`Êñá‰ª∂ ${index+1}/${files.length} ‰∏ä‰º†ÊàêÂäü:`, fileUrl);\n          return fileUrl;\n        } catch (error) {\n          console.error(`Êñá‰ª∂ ${index+1}/${files.length} ‰∏ä‰º†Â§±Ë¥•:`, error);\n          throw error;\n        }\n      });\n      \n      // Á≠âÂæÖÊâÄÊúâ‰∏ä‰º†ÂÆåÊàê\n      const fileUrls = await Promise.all(uploadPromises);\n      console.log('ÊâÄÊúâÊñá‰ª∂‰∏ä‰º†ÂÆåÊàêÔºåURLÂàóË°®:', fileUrls);\n      return fileUrls;\n    } catch (error) {\n      console.error('ÊâπÈáè‰∏ä‰º†Êñá‰ª∂Âà∞OSSÂ§±Ë¥•:', error);\n      throw error;\n    }\n  }\n};\n\nexport default ossApi; ","import { defineStore } from 'pinia'\nimport { ref } from 'vue'\nimport { usePlantStore } from './plant'\nimport { postApi } from '../services/api'\nimport { ElMessage } from 'element-plus'\n\nexport const usePostStore = defineStore('post', () => {\n  // ÊâÄÊúâÂ∏ñÂ≠êÊï∞ÊçÆ\n  const posts = ref([])\n  const loading = ref(false)\n\n  // Ëé∑ÂèñÊâÄÊúâÂ∏ñÂ≠ê\n  const fetchPosts = async (type = 'all') => {\n    loading.value = true\n    try {\n      const response = await postApi.getPosts(type)\n      posts.value = response.posts\n      return response.posts\n    } catch (error) {\n      console.error('Ëé∑ÂèñÂ∏ñÂ≠êÂ§±Ë¥•:', error)\n      ElMessage.error('Ëé∑ÂèñÂ∏ñÂ≠êÂàóË°®Â§±Ë¥•')\n      return []\n    } finally {\n      loading.value = false\n    }\n  }\n\n  // Ê∑ªÂä†Ëá™ÂÆö‰πâÂ∏ñÂ≠êÔºàÊîØÊåÅÊó•ËÆ∞ÂíåËØ¥ËØ¥Ôºâ\n  const addCustomPost = async (postData) => {\n    try {\n      // Á°Æ‰øùÊúâÂàõÂª∫Êó∂Èó¥Â≠óÊÆµÔºåÂ¶ÇÊûúÂ∑≤ÁªèÊúâÂ∞±Áî®ÂéüÊù•ÁöÑÔºåÊ≤°ÊúâÂàôËÆæÁΩÆ‰∏∫ÂΩìÂâçÊó∂Èó¥\n      const dataToSubmit = {\n        ...postData,\n        createdAt: postData.createdAt || new Date().toISOString()\n      };\n      console.log('ÂáÜÂ§áÊèê‰∫§Âà∞ÂêéÁ´ØÁöÑÂ∏ñÂ≠êÊï∞ÊçÆ:', dataToSubmit);\n      \n      const response = await postApi.createPost(dataToSubmit);\n      await fetchPosts();\n      return true;\n    } catch (error) {\n      console.error('ÂèëÂ∏ÉÂ§±Ë¥•:', error);\n      ElMessage.error('ÂèëÂ∏ÉÂ§±Ë¥•ÔºåËØ∑Á®çÂêéÂÜçËØï');\n      return false;\n    }\n  }\n  \n  // ÂÖºÂÆπÊóßÁöÑÊ∑ªÂä†ËØ¥ËØ¥ÊñπÊ≥ï\n  const addPost = async (content, images = [], location = '') => {\n    return await addCustomPost({\n      content,\n      images,\n      location,\n      type: 'thought'\n    })\n  }\n  \n  // Âà†Èô§Â∏ñÂ≠ê\n  const removePost = async (id) => {\n    loading.value = true\n    try {\n      await postApi.deletePost(id)\n      // Êõ¥Êñ∞Êú¨Âú∞Áä∂ÊÄÅ\n      posts.value = posts.value.filter(post => post._id !== id)\n      ElMessage.success('Âà†Èô§ÊàêÂäü')\n      return true\n    } catch (error) {\n      console.error('Âà†Èô§Â∏ñÂ≠êÂ§±Ë¥•:', error)\n      ElMessage.error('Âà†Èô§Â§±Ë¥•ÔºåËØ∑Á®çÂêéÂÜçËØï')\n      return false\n    } finally {\n      loading.value = false\n    }\n  }\n  \n  // Êõ¥Êñ∞Â∏ñÂ≠ê\n  const updatePost = async (id, postData) => {\n    try {\n      // Á°Æ‰øù‰øùÁïôÂéüÂßãÂàõÂª∫Êó∂Èó¥\n      const dataToSubmit = {\n        ...postData,\n        // Â¶ÇÊûúÊèê‰æõ‰∫ÜÂàõÂª∫Êó∂Èó¥Â∞±‰ΩøÁî®ÂÆÉÔºåÂê¶Âàô‰ΩøÁî®ÂΩìÂâçÊó∂Èó¥\n        createdAt: postData.createdAt || new Date().toISOString()\n      };\n      console.log('Êõ¥Êñ∞Â∏ñÂ≠êÊï∞ÊçÆ:', dataToSubmit);\n      \n      const response = await postApi.updatePost(id, dataToSubmit);\n      await fetchPosts();\n      ElMessage.success('Êõ¥Êñ∞ÊàêÂäü');\n      return true;\n    } catch (error) {\n      console.error('Êõ¥Êñ∞Â§±Ë¥•:', error);\n      ElMessage.error('Êõ¥Êñ∞Â§±Ë¥•ÔºåËØ∑Á®çÂêéÂÜçËØï');\n      return false;\n    }\n  }\n  \n  // ÂàùÂßãÂåñÊó∂Âä†ËΩΩÂ∏ñÂ≠ê\n  const init = () => {\n    fetchPosts()\n  }\n  \n  // Ëá™Âä®ÂàùÂßãÂåñ\n  init()\n  \n  return {\n    posts,\n    loading,\n    fetchPosts,\n    addPost,\n    addCustomPost,\n    removePost,\n    updatePost\n  }\n}) ","<!-- Timeline.vue -->\n<template>\n  <div class=\"timeline-container\">\n    <div class=\"timeline\">\n      <div v-for=\"(story, index) in sortedStories\" :key=\"story.id\" class=\"timeline-item\">\n        <div class=\"timeline-date\">\n          <div class=\"date-bubble\">{{ formatDate(story.time) }}</div>\n          <div class=\"time-text\">{{ formatTime(story.time) }}</div>\n        </div>\n        \n        <div class=\"timeline-content\" :class=\"{ 'is-diary': story.postType === 'diary' }\">\n          <!-- Â∏ñÂ≠êÁ±ªÂûãÊ†áÁ≠æ -->\n          <div class=\"post-type-tag\" :class=\"{ 'diary': story.postType === 'diary' }\">\n            {{ story.postType === 'diary' ? 'Êó•ËÆ∞' : 'ËØ¥ËØ¥' }}\n          </div>\n          \n          <!-- Â∏ñÂ≠êÊ†áÈ¢òÂå∫ÂüüÔºåÂè™ÊúâÂú®Ê†áÈ¢òÂ≠òÂú®Êó∂ÊòæÁ§∫ -->\n          <div v-if=\"story.title && (story.postType === 'diary' || story.title.trim() !== '')\" class=\"content-header\">\n            <h3 class=\"content-title\">{{ story.title }}</h3>\n          </div>\n          \n          <!-- Â∏ñÂ≠êÂÜÖÂÆπ -->\n          <div class=\"content-body\">\n            <p class=\"content-text\">{{ story.description }}</p>\n            \n            <!-- ÂõæÁâáÂ±ïÁ§∫Âå∫Âüü -->\n            <div v-if=\"story.imageSrc\" class=\"content-images\">\n              <el-image\n                :src=\"story.imageSrc\"\n                :preview-src-list=\"story.galleryImages || [story.imageSrc]\"\n                fit=\"cover\"\n                class=\"content-image\"\n              />\n              \n              <div v-if=\"(story.galleryImages?.length || 0) > 1\" class=\"image-count\">\n                +{{ story.galleryImages.length - 1 }}\n              </div>\n            </div>\n          </div>\n          \n          <!-- Â∏ñÂ≠êÂ∫ïÈÉ®Âå∫Âüü -->\n          <div class=\"content-footer\">\n            <div class=\"post-actions\">\n              <el-button \n                size=\"small\" \n                type=\"primary\" \n                text \n                @click=\"editPost(story)\"\n              >\n                ÁºñËæë\n              </el-button>\n              <el-button \n                size=\"small\" \n                type=\"danger\" \n                text \n                @click=\"confirmDelete(story.id)\"\n              >\n                Âà†Èô§\n              </el-button>\n            </div>\n          </div>\n        </div>\n      </div>\n      \n      <!-- Á©∫Áä∂ÊÄÅ -->\n      <div v-if=\"stories.length === 0\" class=\"empty-timeline\">\n        <el-empty description=\"ËøòÊ≤°ÊúâÂÜÖÂÆπÔºåÂø´Êù•ÂèëÂ∏É‰∏ÄÊù°ÂêßÔºÅ\"></el-empty>\n      </div>\n    </div>\n    \n    <!-- Âà†Èô§Á°ÆËÆ§Ê°Ü -->\n    <el-dialog\n      v-model=\"deleteDialogVisible\"\n      title=\"Á°ÆËÆ§Âà†Èô§\"\n      width=\"300px\"\n    >\n      <span>Á°ÆÂÆöË¶ÅÂà†Èô§ËøôÊù°ËÆ∞ÂΩïÂêóÔºü</span>\n      <template #footer>\n        <span class=\"dialog-footer\">\n          <el-button @click=\"deleteDialogVisible = false\">ÂèñÊ∂à</el-button>\n          <el-button type=\"danger\" @click=\"deletePost\">Á°ÆÂÆö</el-button>\n        </span>\n      </template>\n    </el-dialog>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed } from 'vue'\nimport { usePostStore } from '../stores/post'\nimport { Delete, Edit } from '@element-plus/icons-vue'\nimport { ElMessage } from 'element-plus'\n\nconst props = defineProps({\n  stories: {\n    type: Array,\n    default: () => []\n  }\n})\nconst sortedStories = computed(() => {\n  return [...props.stories].sort((a, b) => {\n    const dateA = new Date(a.time).getTime()\n    const dateB = new Date(b.time).getTime()\n    return dateB - dateA // ÈôçÂ∫èÊéíÂàóÔºàÊúÄÊñ∞Âú®ÂâçÔºâ\n  })\n})\nconst postStore = usePostStore()\nconst deleteDialogVisible = ref(false)\nconst postToDelete = ref(null)\n\n// ÂÆö‰πâ‰∫ã‰ª∂\nconst emit = defineEmits(['delete-post', 'edit-post'])\n\n// Âà†Èô§‰∏çÈúÄË¶ÅÁöÑÊñπÊ≥ï\nconst formatDate = (dateString) => {\n  if (!dateString) return 'Êú™Áü•Êó∂Èó¥'\n  try {\n    const date = new Date(dateString)\n    if (isNaN(date.getTime())) {\n      console.warn('Êó†ÊïàÁöÑÊó•ÊúüÊ†ºÂºè:', dateString)\n      return 'Êó†ÊïàÊó∂Èó¥'\n    }\n    return date.toLocaleDateString('zh-CN', { month: 'short', day: 'numeric' })\n  } catch (error) {\n    console.error('Êó•ÊúüÊ†ºÂºèÂåñÈîôËØØ:', error)\n    return 'Êó†ÊïàÊó∂Èó¥'\n  }\n}\n\nconst formatTime = (dateString) => {\n  if (!dateString) return ''\n  try {\n    const date = new Date(dateString)\n    if (isNaN(date.getTime())) {\n      console.warn('Êó†ÊïàÁöÑÊó∂Èó¥Ê†ºÂºè:', dateString)\n      return ''\n    }\n    return date.toLocaleTimeString('zh-CN', { hour: '2-digit', minute: '2-digit' })\n  } catch (error) {\n    console.error('Êó∂Èó¥Ê†ºÂºèÂåñÈîôËØØ:', error)\n    return ''\n  }\n}\n\n// ÊâìÂºÄÂà†Èô§Á°ÆËÆ§Ê°Ü\nconst confirmDelete = (id) => {\n  postToDelete.value = id\n  deleteDialogVisible.value = true\n}\n\n// Âà†Èô§Â∏ñÂ≠ê\nconst deletePost = async () => {\n  if (postToDelete.value) {\n    emit('delete-post', postToDelete.value);\n    deleteDialogVisible.value = false\n    postToDelete.value = null\n  }\n}\n\n// ÁºñËæëÂ∏ñÂ≠ê\nconst editPost = (story) => {\n  emit('edit-post', story)\n}\n</script>\n\n<style scoped>\n.timeline-container {\n  padding: 20px 0;\n}\n\n.timeline {\n  position: relative;\n  padding: 20px 0;\n}\n\n.timeline::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 80px;\n  width: 2px;\n  background: #e4e7ed;\n}\n\n.timeline-item {\n  position: relative;\n  display: flex;\n  margin-bottom: 30px;\n}\n\n.timeline-item:last-child {\n  margin-bottom: 0;\n}\n\n.timeline-date {\n  width: 160px;\n  padding-right: 40px;\n  display: flex;\n  flex-direction: column;\n  align-items: flex-end;\n  padding-top: 5px;\n}\n\n.date-bubble {\n  background: #f0f9ff;\n  border-radius: 16px;\n  padding: 4px 12px;\n  font-size: 14px;\n  font-weight: 500;\n  color: #409EFF;\n  margin-bottom: 4px;\n}\n\n.time-text {\n  font-size: 12px;\n  color: #909399;\n}\n\n.timeline-content {\n  flex: 1;\n  background: white;\n  border-radius: 12px;\n  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.06);\n  padding: 16px;\n  margin-left: 20px;\n  position: relative;\n  transition: all 0.3s ease;\n  border-left: 3px solid #67c23a;\n}\n\n.timeline-content.is-diary {\n  border-left-color: #409EFF;\n}\n\n.timeline-content::before {\n  content: '';\n  position: absolute;\n  width: 12px;\n  height: 12px;\n  background: #67c23a;\n  border-radius: 50%;\n  left: -27px;\n  top: 18px;\n}\n\n.timeline-content.is-diary::before {\n  background: #409EFF;\n}\n\n.post-type-tag {\n  position: absolute;\n  top: -10px;\n  right: 20px;\n  background: #67c23a;\n  color: white;\n  padding: 2px 10px;\n  border-radius: 12px;\n  font-size: 12px;\n  font-weight: 500;\n}\n\n.post-type-tag.diary {\n  background: #409EFF;\n}\n\n.content-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 12px;\n}\n\n.content-title {\n  margin: 0;\n  font-size: 16px;\n  font-weight: 600;\n  color: #303133;\n}\n\n.content-body {\n  margin-bottom: 16px;\n}\n\n.content-text {\n  margin: 0 0 16px 0;\n  font-size: 14px;\n  line-height: 1.6;\n  color: #606266;\n  white-space: pre-line;\n}\n\n.content-images {\n  position: relative;\n  border-radius: 8px;\n  overflow: hidden;\n  width: fit-content;\n  max-width: 100%;\n}\n\n.content-image {\n  width: 100%;\n  max-width: 240px;\n  object-fit: contain;\n  border-radius: 8px;\n}\n\n.image-count {\n  position: absolute;\n  bottom: 10px;\n  right: 10px;\n  background: rgba(0, 0, 0, 0.5);\n  color: white;\n  border-radius: 12px;\n  padding: 2px 8px;\n  font-size: 12px;\n}\n\n.content-footer {\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n  padding-top: 8px;\n  border-top: 1px solid #f0f2f5;\n}\n\n.post-actions {\n  display: flex;\n  gap: 8px;\n  opacity: 0.6;\n  transition: opacity 0.3s;\n}\n\n.post-actions:hover {\n  opacity: 1;\n}\n\n.timeline-content:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);\n}\n\n.empty-timeline {\n  padding: 40px 0;\n  display: flex;\n  justify-content: center;\n}\n\n@media (max-width: 768px) {\n  .timeline::before {\n    left: 30px;\n  }\n  \n  .timeline-date {\n    width: 90px;\n    padding-right: 20px;\n  }\n  \n  .date-bubble {\n    padding: 2px 8px;\n    font-size: 12px;\n  }\n  \n  .timeline-content {\n    margin-left: 10px;\n  }\n  \n  .timeline-content::before {\n    left: -17px;\n  }\n  \n  .content-image {\n    width: 100%;\n    height: auto;\n  }\n}\n</style>","import script from \"./TimeLinePage.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./TimeLinePage.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./TimeLinePage.vue?vue&type=style&index=0&id=cd45b97c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-cd45b97c\"]])\n\nexport default __exports__","<template>\n  <div class=\"posts-container\">\n    <div class=\"page-header\">\n      <h1 class=\"page-title\">ÂøÉÊÉÖÁ©∫Èó¥</h1>\n      <p class=\"page-subtitle\">ËÆ∞ÂΩïÁîüÊ¥ªÁöÑÁÇπÊª¥ÔºåÂàÜ‰∫´ÂøÉÊÉÖÁöÑÁû¨Èó¥</p>\n    </div>\n    \n    <div class=\"content-card\">\n      <div class=\"thought-input-area\" @click=\"openPostDialog('thought')\">\n        <div class=\"thought-input-placeholder\">\n          <el-icon><Edit /></el-icon>\n          <span>ÂÜô‰∏ãÂøÉ‰∏≠Á¢éÁ¢éÂøµ...</span>\n        </div>\n      </div>\n      \n      <div class=\"filter-tabs\">\n        <div \n          class=\"filter-tab\" \n          :class=\"{ active: activeFilter === 'all' }\"\n          @click=\"activeFilter = 'all'\"\n        >\n          ÂÖ®ÈÉ®\n        </div>\n        <div \n          class=\"filter-tab\" \n          :class=\"{ active: activeFilter === 'diary' }\"\n          @click=\"activeFilter = 'diary'\"\n        >\n          Êó•ËÆ∞\n        </div>\n        <div \n          class=\"filter-tab\" \n          :class=\"{ active: activeFilter === 'thought' }\"\n          @click=\"activeFilter = 'thought'\"\n        >\n          ËØ¥ËØ¥\n        </div>\n      </div>\n      \n    </div>\n    \n    <div class=\"timeline-wrapper\">\n      <TimeLinePage \n        :stories=\"filteredPosts\" \n        @delete-post=\"deletePost\"\n        @edit-post=\"editPost\"\n      ></TimeLinePage>\n    </div>\n    \n    <!-- Êñ∞Â¢û/ÁºñËæëËØ¥ËØ¥/Êó•ËÆ∞ÂØπËØùÊ°Ü -->\n    <el-dialog\n      v-model=\"showPostDialog\"\n      :title=\"isEditing ? (postType === 'diary' ? 'ÁºñËæëÊó•ËÆ∞' : 'ÁºñËæëËØ¥ËØ¥') : (postType === 'diary' ? 'ÂÜôÊó•ËÆ∞' : 'ÂèëËØ¥ËØ¥')\"\n      width=\"65%\"\n      custom-class=\"post-dialog\"\n      destroy-on-close\n      :fullscreen=\"false\"\n    >\n      <div class=\"post-type-selector\">\n        <div \n          class=\"post-type-option\" \n          :class=\"{ active: postType === 'thought' }\"\n          @click=\"postType = 'thought'\"\n        >\n          <el-icon><ChatDotRound /></el-icon>\n          <span>ËØ¥ËØ¥</span>\n        </div>\n        <div \n          class=\"post-type-option\" \n          :class=\"{ active: postType === 'diary' }\"\n          @click=\"postType = 'diary'\"\n        >\n          <el-icon><Notebook /></el-icon>\n          <span>Êó•ËÆ∞</span>\n        </div>\n      </div>\n      \n      <div class=\"diary-header\" v-if=\"postType === 'diary'\">\n        <div class=\"diary-date\">\n          <div class=\"diary-day\">{{ new Date().getDate() }}</div>\n          <div class=\"diary-month-year\">{{ new Date().toLocaleDateString('zh-CN', { month: 'long', year: 'numeric' }) }}</div>\n        </div>\n        <div class=\"diary-weather-mood\" v-if=\"newPost.weather || newPost.mood\">\n          <span v-if=\"newPost.weather\" class=\"diary-weather\">\n            {{ {sunny: '‚òÄÔ∏è Êô¥Â§©', rainy: 'üåßÔ∏è ‰∏ãÈõ®', cloudy: '‚òÅÔ∏è Â§ö‰∫ë', snowy: '‚ùÑÔ∏è ‰∏ãÈõ™'}[newPost.weather] || '' }}\n          </span>\n          <span v-if=\"newPost.mood\" class=\"diary-mood\">{{ getMoodText(newPost.mood) }}</span>\n        </div>\n      </div>\n      \n      <el-form class=\"diary-form\">\n        <el-form-item v-if=\"postType === 'diary'\" class=\"diary-title-item\">\n          <el-input\n            v-model=\"newPost.title\"\n            placeholder=\"Áªô‰ªäÂ§©ÂÜô‰∏™Ê†áÈ¢ò...\"\n            :prefix-icon=\"Document\"\n            class=\"diary-title-input\"\n            :size=\"postType === 'diary' ? 'large' : 'default'\"\n          />\n        </el-form-item>\n        \n        <el-form-item class=\"diary-content-item\">\n          <el-input\n            v-model=\"newPost.content\"\n            type=\"textarea\"\n            :rows=\"postType === 'diary' ? 10 : 6\"\n            :placeholder=\"postType === 'diary' ? '‰ªäÂ§©ÂèëÁîü‰∫Ü‰ªÄ‰πà...\\n\\nÂÜô‰∏ãÊ≠§ÂàªÁöÑÂøÉÊÉÖÔºåËÆ∞ÂΩïÁîüÊ¥ªÁöÑÁÇπÊª¥...' : 'Ê≠§ÂàªÁöÑÊÉ≥Ê≥ï...'\"\n            class=\"diary-content\"\n            resize=\"none\"\n          />\n        </el-form-item>\n        \n        <div class=\"diary-toolbar\" v-if=\"postType === 'diary'\">\n          <div class=\"toolbar-group\">\n          <div class=\"option-item\" @click=\"toggleMood\">\n            <el-icon><StarFilled /></el-icon>\n            <span>{{ newPost.mood ? `ÂøÉÊÉÖÔºö${getMoodText(newPost.mood)}` : 'Ê∑ªÂä†ÂøÉÊÉÖ' }}</span>\n          </div>\n          \n          <div class=\"option-item\" @click=\"locationVisible = !locationVisible\">\n            <el-icon><Location /></el-icon>\n            <span>{{ locationVisible ? 'ÈöêËóè‰ΩçÁΩÆ' : 'Ê∑ªÂä†‰ΩçÁΩÆ' }}</span>\n          </div>\n          \n            <div class=\"option-item\" @click=\"weatherVisible = !weatherVisible\">\n            <el-icon><Sunny /></el-icon>\n            <span>{{ weatherVisible ? 'ÈöêËóèÂ§©Ê∞î' : 'Ê∑ªÂä†Â§©Ê∞î' }}</span>\n            </div>\n          </div>\n          \n          <div class=\"toolbar-group\">\n            <div class=\"diary-image-count\" v-if=\"newPost.images.length > 0\">\n              Â∑≤Ê∑ªÂä† {{ newPost.images.length }} Âº†ÂõæÁâá\n            </div>\n            <el-button size=\"small\" @click=\"scrollToUpload\">Ê∑ªÂä†ÂõæÁâá</el-button>\n          </div>\n        </div>\n        \n        <el-form-item v-if=\"postType !== 'diary'\" class=\"thought-options\">\n          <div class=\"post-options\">\n            <div class=\"option-item\" @click=\"toggleMood\">\n              <el-icon><StarFilled /></el-icon>\n              <span>{{ newPost.mood ? `ÂøÉÊÉÖÔºö${getMoodText(newPost.mood)}` : 'Ê∑ªÂä†ÂøÉÊÉÖ' }}</span>\n            </div>\n            \n            <div class=\"option-item\" @click=\"locationVisible = !locationVisible\">\n              <el-icon><Location /></el-icon>\n              <span>{{ locationVisible ? 'ÈöêËóè‰ΩçÁΩÆ' : 'Ê∑ªÂä†‰ΩçÁΩÆ' }}</span>\n            </div>\n          </div>\n        </el-form-item>\n        \n        <el-form-item v-if=\"locationVisible\">\n          <el-input \n            v-model=\"newPost.location\" \n            placeholder=\"ÊàëÂú®Âì™Èáå...\" \n            :prefix-icon=\"Location\"\n            class=\"location-input\"\n          />\n        </el-form-item>\n        \n        <el-form-item v-if=\"weatherVisible && postType === 'diary'\" class=\"weather-selector\">\n          <div class=\"weather-options\">\n            <div \n              v-for=\"(label, value) in { sunny: '‚òÄÔ∏è Êô¥Â§©', rainy: 'üåßÔ∏è ‰∏ãÈõ®', cloudy: '‚òÅÔ∏è Â§ö‰∫ë', snowy: '‚ùÑÔ∏è ‰∏ãÈõ™' }\" \n              :key=\"value\"\n              class=\"weather-option\"\n              :class=\"{ active: newPost.weather === value }\"\n              @click=\"newPost.weather = value\"\n            >\n              <span class=\"weather-icon\">{{ label.split(' ')[0] }}</span>\n              <span>{{ label.split(' ')[1] }}</span>\n            </div>\n          </div>\n        </el-form-item>\n        \n        <el-form-item v-if=\"showMoodSelector\" class=\"mood-item\">\n          <div class=\"mood-selector\">\n            <div \n              v-for=\"mood in moods\" \n              :key=\"mood.value\" \n              class=\"mood-item\"\n              :class=\"{ active: newPost.mood === mood.value }\"\n              @click=\"selectMood(mood.value)\"\n            >\n              <span class=\"mood-emoji\">{{ mood.emoji }}</span>\n              <span class=\"mood-text\">{{ mood.text }}</span>\n            </div>\n          </div>\n        </el-form-item>\n        \n        <el-form-item id=\"upload-section\">\n          <div class=\"upload-area\" :class=\"{ 'diary-upload': postType === 'diary' }\">\n            <div class=\"upload-title\" v-if=\"postType === 'diary'\">Ê∑ªÂä†ÂõæÁâáËÆ∞ÂΩïÁæéÂ•ΩÁû¨Èó¥</div>\n            <el-upload\n              action=\"#\"\n              list-type=\"picture-card\"\n              :auto-upload=\"false\"\n              :on-change=\"handleFileChange\"\n              :on-remove=\"handleFileRemove\"\n              :file-list=\"fileList\"\n              :on-preview=\"handlePictureCardPreview\"\n            >\n              <template #default>\n                <el-icon class=\"upload-icon\"><Plus /></el-icon>\n                <span class=\"upload-text\">Ê∑ªÂä†ÂõæÁâá</span>\n              </template>\n            </el-upload>\n            <el-dialog v-model=\"dialogVisible\">\n              <img w-full :src=\"dialogImageUrl\" alt=\"È¢ÑËßàÂõæÁâá\" />\n            </el-dialog>\n          </div>\n        </el-form-item>\n      </el-form>\n      \n      <template #footer>\n        <div class=\"dialog-footer\">\n          <el-button @click=\"showPostDialog = false\">ÂèñÊ∂à</el-button>\n          <el-button type=\"primary\" @click=\"handleSubmit\" :disabled=\"!isPostValid\" :size=\"postType === 'diary' ? 'large' : 'default'\">\n            {{ isEditing ? '‰øùÂ≠ò‰øÆÊîπ' : (postType === 'diary' ? '‰øùÂ≠òÊó•ËÆ∞' : 'ÂèëÂ∏ÉËØ¥ËØ¥') }}\n          </el-button>\n        </div>\n      </template>\n    </el-dialog>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, watch, onMounted } from 'vue'\nimport { usePostStore } from '../stores/post'\nimport { format } from 'date-fns'\nimport { \n  Plus, \n  Location, \n  Edit, \n  Document,\n  ChatDotRound, \n  Notebook,\n  StarFilled,\n  Sunny\n} from '@element-plus/icons-vue'\nimport { ElMessage, ElLoading } from 'element-plus'\nimport TimeLinePage from '@/components/TimeLinePage.vue'\nimport ossApi from '@/services/ossApi' // ÂØºÂÖ•OSS APIÊúçÂä°\n\nconst postStore = usePostStore()\n\nconst showPostDialog = ref(false)\nconst locationVisible = ref(false)\nconst weatherVisible = ref(false)\nconst showMoodSelector = ref(false)\nconst postType = ref('thought')\nconst activeFilter = ref('all')\nconst isEditing = ref(false)\nconst editingPostId = ref(null)\nconst fileList = ref([]) // Êñá‰ª∂ÂàóË°®\nconst dialogImageUrl = ref('') // È¢ÑËßàÂõæÁâáURL\nconst dialogVisible = ref(false) // È¢ÑËßàÂØπËØùÊ°ÜÊòæÁ§∫Áä∂ÊÄÅ\nconst uploadLoading = ref(false) // ‰∏ä‰º†Âä†ËΩΩÁä∂ÊÄÅ\n\nconst newPost = ref({\n  title: '',\n  content: '',\n  images: [],\n  uploadFiles: [], // Ê∏ÖÁ©∫‰∏ä‰º†Êñá‰ª∂ÂàóË°®\n  location: '',\n  mood: '',\n  weather: '',\n  type: 'thought'\n})\n\n// ÂøÉÊÉÖÈÄâÈ°π\nconst moods = [\n  { emoji: 'üòä', text: 'ÂºÄÂøÉ', value: 'happy' },\n  { emoji: 'üò¢', text: '‰º§ÂøÉ', value: 'sad' },\n  { emoji: 'üò°', text: 'ÁîüÊ∞î', value: 'angry' },\n  { emoji: 'üò¥', text: 'Áñ≤ÊÉ´', value: 'tired' },\n  { emoji: 'ü•∞', text: 'Áà±ÊÑè', value: 'love' },\n  { emoji: 'ü§î', text: 'ÊÄùËÄÉ', value: 'thinking' }\n]\n\n// Ëé∑ÂèñÂøÉÊÉÖÊñáÊú¨\nconst getMoodText = (moodValue) => {\n  const mood = moods.find(m => m.value === moodValue)\n  return mood ? `${mood.emoji} ${mood.text}` : ''\n}\n\n// ÂàáÊç¢ÂøÉÊÉÖÈÄâÊã©Âô®\nconst toggleMood = () => {\n  showMoodSelector.value = !showMoodSelector.value\n}\n\n// ÈÄâÊã©ÂøÉÊÉÖ\nconst selectMood = (moodValue) => {\n  newPost.value.mood = moodValue\n  showMoodSelector.value = false\n}\n\n// Ê£ÄÊü•ÂèëÂ∏ÉÂÜÖÂÆπÊòØÂê¶ÊúâÊïà\nconst isPostValid = computed(() => {\n  if (postType.value === 'diary') {\n    return newPost.value.title.trim() && newPost.value.content.trim()\n  } else {\n    return newPost.value.content.trim()\n  }\n})\n\n// Ê†ºÂºèÂåñÊó•Êúü\nconst formatDate = (dateString) => {\n  if (!dateString) return 'ÂàöÂàö'\n  \n  const date = new Date(dateString)\n  if (isNaN(date.getTime())) {\n    console.warn('Êó†ÊïàÁöÑÊó•ÊúüÊ†ºÂºè:', dateString)\n    return 'ÂàöÂàö'\n  }\n  \n  return date.toLocaleString('zh-CN', {\n    month: '2-digit',\n    day: '2-digit',\n    hour: '2-digit',\n    minute: '2-digit',\n    hour12: false\n  })\n}\n\n// Ê†ºÂºèÂåñÊó∂Èó¥\nconst formatPostTime = (createdAt) => {\n  if (!createdAt) {\n    console.warn('Áº∫Â∞ëÂàõÂª∫Êó∂Èó¥Ôºå‰ΩøÁî®ÂΩìÂâçÊó∂Èó¥');\n    return format(new Date(), 'yyyy-MM-dd HH:mm');\n  }\n  \n  try {\n    const date = new Date(createdAt);\n    if (!isNaN(date.getTime())) {\n      return format(date, 'yyyy-MM-dd HH:mm');\n    } else {\n      console.warn('Êó†ÊïàÁöÑÊó•ÊúüÊ†ºÂºè:', createdAt);\n    }\n  } catch (error) {\n    console.error('Êó•ÊúüÊ†ºÂºèÂåñÈîôËØØ:', error);\n  }\n  \n  return format(new Date(), 'yyyy-MM-dd HH:mm');\n}\n\n// Ê∑ªÂä†Â∏ñÂ≠ê\nconst addPost = async () => {\n  if (!isPostValid.value) return\n  \n  try {\n    const postData = {\n      ...newPost.value,\n      createdAt: new Date().toISOString() // Á°Æ‰øùËÆæÁΩÆÂàõÂª∫Êó∂Èó¥\n    }\n    \n    const success = await postStore.addCustomPost(postData)\n    if (success) {\n      resetForm()\n      showPostDialog.value = false\n      await loadPosts()\n    }\n  } catch (error) {\n    console.error('ÂèëÂ∏ÉÂ§±Ë¥•:', error)\n    ElMessage.error('ÂèëÂ∏ÉÂ§±Ë¥•ÔºåËØ∑Á®çÂêéÂÜçËØï')\n  }\n}\n\n// Ê†ºÂºèÂåñÂπ∂ËøáÊª§Â∏ñÂ≠êÊï∞ÊçÆ‰ª•ÈÄÇÂ∫îTimeLinePageÁªÑ‰ª∂\nconst filteredPosts = computed(() => {\n  if (!Array.isArray(postStore.posts)) {\n    console.warn('posts ‰∏çÊòØÊï∞ÁªÑ:', postStore.posts)\n    return []\n  }\n  \n  let result = [...postStore.posts]\n  \n  // Ë∞ÉËØïÔºöÊâìÂç∞ÂéüÂßãÊï∞ÊçÆ\n  console.log('ÂéüÂßãÂ∏ñÂ≠êÊï∞ÊçÆ:', result)\n  \n  // ÊåâÁ±ªÂûãËøáÊª§\n  if (activeFilter.value !== 'all') {\n    result = result.filter(post => post.type === activeFilter.value)\n  }\n  \n  // ÊåâÊó•ÊúüÊéíÂ∫èÔºàÈôçÂ∫èÔºâ\n  result.sort((a, b) => {\n    const dateA = a.updatedAt ? new Date(a.updatedAt).getTime() : 0\n    const dateB = b.updatedAt ? new Date(b.updatedAt).getTime() : 0\n    return dateA - dateB\n  })\n  \n  return result.map(post => {\n    // Ë∞ÉËØïÔºöÊâìÂç∞ÊØè‰∏™Â∏ñÂ≠êÁöÑÊó•Êúü\n    console.log('ÂêéÁ´ØËøîÂõûÁöÑÂ∏ñÂ≠êÔºö', post);\n    console.log('Â§ÑÁêÜÂ∏ñÂ≠êÊó•Êúü:', {\n      id: post._id,\n      createdAt: post.createdAt,\n    })\n    \n    // ÊûÑÂª∫Ê†áÈ¢ò: Êó•ËÆ∞ÊòæÁ§∫Ê†áÈ¢òÔºåËØ¥ËØ¥ÊòæÁ§∫‰ΩçÁΩÆÊàñÂøÉÊÉÖ\n    let title = post.title || ''\n    if (!title) {\n      if (post.location) {\n        title = `üìç ${post.location}`\n      } else if (post.mood) {\n        const mood = moods.find(m => m.value === post.mood)\n        title = mood ? `${mood.emoji} ${mood.text}` : ''\n      } else {\n        title = post.type === 'diary' ? 'Êó†Ê†áÈ¢òÊó•ËÆ∞' : ''\n      }\n    }\n    \n    // ÊûÑÂª∫ÊèèËø∞: ÂèØËÉΩÂåÖÂê´Â§©Ê∞îÁ≠â‰ø°ÊÅØ\n    let description = post.content\n    if (post.weather && post.type === 'diary') {\n      const weatherEmoji = {\n        'sunny': '‚òÄÔ∏è Êô¥Â§©',\n        'rainy': 'üåßÔ∏è ‰∏ãÈõ®',\n        'cloudy': '‚òÅÔ∏è Â§ö‰∫ë',\n        'snowy': '‚ùÑÔ∏è ‰∏ãÈõ™'\n      }\n      description = `${weatherEmoji[post.weather] || ''}\\n${description}`\n    }\n    \n    return {\n      time: post.updatedAt, // Áõ¥Êé•‰ΩøÁî®ÂêéÁ´ØËøîÂõûÁöÑÂàõÂª∫Êó∂Èó¥\n      title: title,\n      description: description,\n      imageSrc: post.images && post.images.length > 0 ? post.images[0] : null,\n      galleryImages: post.images || [], // Á°Æ‰øùÊòØÊï∞ÁªÑ\n      id: post._id,\n      postType: post.type,\n      // Ê∑ªÂä†ÂéüÂßãÂ±ûÊÄß‰ª•‰æøÁºñËæëÊó∂Ê≠£Á°Æ‰øùÂ≠ò\n      location: post.location,\n      mood: post.mood,\n      weather: post.weather\n    }\n  })\n})\n\n// ÂàùÂßãÂåñÊó∂Âä†ËΩΩÂ∏ñÂ≠ê\nconst loadPosts = async () => {\n  await postStore.fetchPosts(activeFilter.value === 'all' ? '' : activeFilter.value)\n}\n\n// ÁõëÂê¨Á≠õÈÄâÂô®ÂèòÂåñÈáçÊñ∞Âä†ËΩΩÂ∏ñÂ≠ê\nwatch(activeFilter, async () => {\n  await loadPosts()\n})\n\n// ÈáçÁΩÆË°®Âçï\nconst resetForm = () => {\n  newPost.value = {\n    title: '',\n    content: '',\n    images: [],\n    uploadFiles: [], // Ê∏ÖÁ©∫‰∏ä‰º†Êñá‰ª∂ÂàóË°®\n    location: '',\n    mood: 'neutral',\n    weather: 'sunny',\n    type: postType.value\n  }\n  // Ê∏ÖÁ©∫Êñá‰ª∂ÂàóË°®\n  fileList.value = []\n  locationVisible.value = false\n  weatherVisible.value = false\n  showMoodSelector.value = false\n  isEditing.value = false\n  editingPostId.value = null\n}\n\n// Âà†Èô§Â∏ñÂ≠ê\nconst deletePost = async (id) => {\n  const success = await postStore.removePost(id)\n  if (success) {\n    // ÈáçÊñ∞Âä†ËΩΩÂ∏ñÂ≠ê\n    loadPosts()\n  }\n}\n\n// ÂàùÂßãÂåñÊó∂Âä†ËΩΩÂ∏ñÂ≠ê\nonMounted(() => {\n  loadPosts()\n})\n\n// Â§ÑÁêÜÂõæÁâáÈ¢ÑËßà\nconst handlePictureCardPreview = (file) => {\n  dialogImageUrl.value = file.url || URL.createObjectURL(file.raw)\n  dialogVisible.value = true\n}\n\n// Â§ÑÁêÜÊñá‰ª∂ÈÄâÊã©\nconst handleFileChange = (file) => {\n  // ‰øùÁïôÊñá‰ª∂ÂØπË±°Áî®‰∫é‰∏ä‰º†\n  if (!newPost.value.uploadFiles) {\n    newPost.value.uploadFiles = []\n  }\n  newPost.value.uploadFiles.push(file.raw)\n  \n  // ÂàõÂª∫‰∏¥Êó∂URLÁî®‰∫éÊòæÁ§∫\n  const tempUrl = URL.createObjectURL(file.raw)\n  file.url = tempUrl // Ê∑ªÂä†‰∏¥Êó∂URLÁî®‰∫éÈ¢ÑËßà\n  \n  // Âè™Âú®‰∏ä‰º†ÊàêÂäüÂêéÊâç‰ºöÊ∑ªÂä†Âà∞ÊúÄÁªàÁöÑimagesÊï∞ÁªÑ\n}\n\n// Â§ÑÁêÜÊñá‰ª∂ÁßªÈô§\nconst handleFileRemove = (file) => {\n  // ÁßªÈô§‰∏ä‰º†Êñá‰ª∂ÂàóË°®‰∏≠ÁöÑÊñá‰ª∂\n  if (newPost.value.uploadFiles) {\n    const index = newPost.value.uploadFiles.findIndex(f => {\n      return f === file.raw\n    })\n    if (index !== -1) {\n      newPost.value.uploadFiles.splice(index, 1)\n    }\n  }\n  \n  // Â¶ÇÊûúÂ∑≤‰∏ä‰º†ÔºåÂàô‰πü‰ªéimages‰∏≠ÁßªÈô§\n  if (file.url && file.url.startsWith('http')) {\n    const imageIndex = newPost.value.images.indexOf(file.url)\n    if (imageIndex !== -1) {\n      newPost.value.images.splice(imageIndex, 1)\n    }\n  }\n}\n\n// ‰∏ä‰º†ÊâÄÊúâÈÄâ‰∏≠ÁöÑÂõæÁâáÂà∞OSS\nconst uploadImages = async () => {\n  if (!newPost.value.uploadFiles || newPost.value.uploadFiles.length === 0) {\n    return []\n  }\n  \n  uploadLoading.value = true\n  try {\n    console.log('ÂáÜÂ§á‰∏ä‰º†ÂõæÁâáÔºåÊï∞Èáè:', newPost.value.uploadFiles.length);\n    \n    // Ë∞ÉÁî®OSSApi‰∏ä‰º†Â§ö‰∏™Êñá‰ª∂\n    const imageUrls = await ossApi.uploadMultipleFiles(newPost.value.uploadFiles);\n    \n    console.log('ÂõæÁâá‰∏ä‰º†ÊàêÂäüÔºåURLÂàóË°®:', imageUrls);\n    \n    // Ê∏ÖÁ©∫‰∏ä‰º†Êñá‰ª∂ÂàóË°®\n    newPost.value.uploadFiles = [];\n    \n    // ËøîÂõûÂõæÁâáURLÊï∞ÁªÑ\n    return imageUrls || [];\n  } catch (error) {\n    console.error('‰∏ä‰º†ÂõæÁâáÂ§±Ë¥•:', error);\n    ElMessage.error(`‰∏ä‰º†ÂõæÁâáÂ§±Ë¥•: ${error.message || 'Êú™Áü•ÈîôËØØ'}`);\n    return [];\n  } finally {\n    uploadLoading.value = false;\n  }\n}\n\n// ÊªöÂä®Âà∞‰∏ä‰º†Âå∫Âüü\nconst scrollToUpload = () => {\n  document.getElementById('upload-section')?.scrollIntoView({ behavior: 'smooth' })\n}\n\n// ÊØèÊ¨°ÊòæÁ§∫ÂØπËØùÊ°ÜÊó∂ÔºåÊõ¥Êñ∞postTypeÂà∞newPost\nwatch(postType, (newVal) => {\n  newPost.value.type = newVal\n  console.log('ÂàáÊç¢Á±ªÂûã‰∏∫:', newVal)\n})\n\n// ÂàùÂßãÂåñÂØπËØùÊ°ÜÊó∂ËÆæÁΩÆÁ±ªÂûã\nconst openPostDialog = (type = 'thought') => {\n  isEditing.value = false\n  editingPostId.value = null\n  postType.value = type\n  newPost.value = {\n    title: '',\n    content: '',\n    images: [],\n    uploadFiles: [], // Á°Æ‰øù‰∏ä‰º†Êñá‰ª∂ÂàóË°®‰∏∫Á©∫\n    location: '',\n    mood: 'neutral',\n    weather: 'sunny',\n    type: type\n  }\n  // Ê∏ÖÁ©∫Êñá‰ª∂ÂàóË°®\n  fileList.value = []\n  showPostDialog.value = true\n}\n\n// ÁºñËæëÂ∏ñÂ≠ê\nconst editPost = (post) => {\n  isEditing.value = true\n  editingPostId.value = post.id\n  postType.value = post.postType\n  \n  // Â°´ÂÖÖË°®ÂçïÊï∞ÊçÆ\n  newPost.value = {\n    title: post.title,\n    content: post.description,\n    images: post.galleryImages || [],\n    uploadFiles: [], // Êñ∞‰∏ä‰º†ÁöÑÊñá‰ª∂ÂàùÂßã‰∏∫Á©∫\n    location: post.location || '',\n    mood: post.mood || '',\n    weather: post.weather || '',\n    type: post.postType,\n    createdAt: post.time // ‰øùÁïôÂéüÂßãÂàõÂª∫Êó∂Èó¥\n  }\n  \n  // ÂáÜÂ§áÊñá‰ª∂ÂàóË°®ÊòæÁ§∫Â∑≤ÊúâÂõæÁâá\n  fileList.value = (post.galleryImages || []).map((url, index) => {\n    return {\n      name: `Â∑≤ÊúâÂõæÁâá${index + 1}`,\n      url: url,\n      status: 'success'\n    }\n  })\n  \n  // ÊòæÁ§∫Áõ∏ÂÖ≥ÈÄâÈ°π\n  if (newPost.value.location) {\n    locationVisible.value = true\n  }\n  if (newPost.value.weather) {\n    weatherVisible.value = true\n  }\n  \n  showPostDialog.value = true\n}\n\n// Â§ÑÁêÜÊèê‰∫§ÔºàÊñ∞Â¢ûÊàñÁºñËæëÔºâ\nconst handleSubmit = async () => {\n  if (!isPostValid.value) return\n  \n  try {\n    // ÊòæÁ§∫Âä†ËΩΩÊèêÁ§∫\n    const loadingInstance = ElLoading.service({\n      lock: true,\n      text: 'Ê≠£Âú®Â§ÑÁêÜÂõæÁâáÂíåÊèê‰∫§ÂÜÖÂÆπÔºåËØ∑Á®çÂÄô...',\n      background: 'rgba(0, 0, 0, 0.7)'\n    })\n    \n    // ÂÖà‰∏ä‰º†ÊâÄÊúâÈÄâ‰∏≠ÁöÑÂõæÁâáÂà∞OSS\n    let imageUrls = []\n    if (newPost.value.uploadFiles && newPost.value.uploadFiles.length > 0) {\n      imageUrls = await uploadImages()\n    }\n    \n    // ÂáÜÂ§áÂ∏ñÂ≠êÊï∞ÊçÆÔºåÂåÖÂê´Â∑≤‰∏ä‰º†ÁöÑÂõæÁâáURLÂíåÂéüÊúâÂõæÁâáÔºàÂ¶ÇÊûúÊúâÔºâ\n    let postImages = [...(newPost.value.images || [])]\n    \n    // Âè™Ê∑ªÂä†Êñ∞‰∏ä‰º†ÁöÑÂõæÁâáURL\n    postImages = [...postImages, ...imageUrls]\n    \n    const postData = {\n      ...newPost.value,\n      images: postImages,\n      // ËÆæÁΩÆÂàõÂª∫Êó∂Èó¥ÔºöÁºñËæëÊó∂‰øùÁïôÂéüÂßãÊó∂Èó¥ÔºåÊñ∞Âª∫Êó∂ËÆæÁΩÆÂΩìÂâçÊó∂Èó¥\n      createdAt: isEditing.value ? newPost.value.createdAt : new Date().toISOString()\n    }\n    \n    // Âà†Èô§‰∏ä‰º†Êñá‰ª∂ÂàóË°®ÔºåÈÅøÂÖçÂèëÈÄÅÂà∞ÂêéÁ´Ø\n    delete postData.uploadFiles\n    \n    console.log('ÂáÜÂ§áÊèê‰∫§ÁöÑÂ∏ñÂ≠êÊï∞ÊçÆ:', postData);\n    \n    let success\n    if (isEditing.value) {\n      success = await postStore.updatePost(editingPostId.value, postData)\n    } else {\n      success = await postStore.addCustomPost(postData)\n    }\n    \n    // ÂÖ≥Èó≠Âä†ËΩΩÊèêÁ§∫\n    loadingInstance.close()\n    \n    if (success) {\n      // Ê∏ÖÁ©∫Ë°®ÂçïÂπ∂ÂÖ≥Èó≠ÂØπËØùÊ°Ü\n      resetForm()\n      showPostDialog.value = false\n      // ÈáçÊñ∞Âä†ËΩΩÂ∏ñÂ≠êÂàóË°®\n      await loadPosts()\n      \n      ElMessage.success(isEditing.value ? 'Êõ¥Êñ∞ÊàêÂäü' : 'ÂèëÂ∏ÉÊàêÂäü')\n    }\n  } catch (error) {\n    console.error('Êìç‰ΩúÂ§±Ë¥•:', error)\n    ElMessage.error('Êìç‰ΩúÂ§±Ë¥•ÔºåËØ∑Á®çÂêéÂÜçËØï')\n  }\n}\n</script>\n\n<style scoped>\n.posts-container {\n  max-width: 1000px;\n  margin: 0 auto;\n  padding: 20px;\n}\n\n.page-header {\n  text-align: center;\n  margin-bottom: 30px;\n}\n\n.page-title {\n  font-size: 28px;\n  color: #409EFF;\n  margin-bottom: 8px;\n}\n\n.page-subtitle {\n  font-size: 16px;\n  color: #909399;\n}\n\n.content-card {\n  border-radius: 12px;\n  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);\n  padding: 24px;\n  margin-bottom: 20px;\n  background-color: #F5F7FA;\n}\n\n.thought-input-area {\n  border: 1px dashed #DCDFE6;\n  border-radius: 8px;\n  padding: 15px;\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n  transition: all 0.3s;\n  margin-bottom: 20px;\n}\n\n.thought-input-area:hover {\n  border-color: #409EFF;\n  background-color: #E6F1FF;\n}\n\n.thought-input-placeholder {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  color: #606266;\n}\n\n.thought-input-placeholder .el-icon {\n  font-size: 20px;\n}\n\n.filter-tabs {\n  display: flex;\n  gap: 16px;\n  border-bottom: 1px solid #DCDFE6;\n  padding-bottom: 12px;\n}\n\n.filter-tab {\n  cursor: pointer;\n  padding: 6px 12px;\n  border-radius: 16px;\n  transition: all 0.3s;\n  font-size: 14px;\n  background-color: #EBEEF5;\n}\n\n.filter-tab:hover {\n  color: #409EFF;\n  background-color: #DBECFF;\n}\n\n.filter-tab.active {\n  color: white;\n  background-color: #409EFF;\n  font-weight: 500;\n}\n\n.content-actions {\n  display: flex;\n  justify-content: flex-end;\n  margin-top: 16px;\n}\n\n.write-diary-btn {\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n}\n\n.timeline-wrapper {\n  margin-top: 30px;\n}\n\n/* ÂØπËØùÊ°ÜÁõ∏ÂÖ≥Ê†∑Âºè */\n:deep(.post-dialog) {\n  border-radius: 16px;\n  overflow: hidden;\n}\n\n.post-type-selector {\n  display: flex;\n  gap: 16px;\n  margin-bottom: 20px;\n}\n\n.post-type-option {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n  padding: 12px;\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.3s;\n  border: 1px solid #EBEEF5;\n}\n\n.post-type-option .el-icon {\n  font-size: 24px;\n  color: #909399;\n}\n\n.post-type-option:hover {\n  background-color: #E6F1FF;\n}\n\n.post-type-option.active {\n  background-color: #409EFF;\n  color: white;\n  border-color: #409EFF;\n}\n\n.post-type-option.active .el-icon {\n  color: white;\n}\n\n/* Êó•ËÆ∞ÁâπÊúâÊ†∑Âºè */\n.diary-form {\n  max-width: 100%;\n  margin: 0 auto;\n}\n\n.diary-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 15px;\n  padding-bottom: 10px;\n  border-bottom: 1px dashed #DCDFE6;\n}\n\n.diary-date {\n  display: flex;\n  align-items: baseline;\n  gap: 8px;\n}\n\n.diary-day {\n  font-size: 28px;\n  font-weight: 700;\n  color: #409EFF;\n}\n\n.diary-month-year {\n  font-size: 14px;\n  color: #606266;\n}\n\n.diary-weather-mood {\n  display: flex;\n  gap: 15px;\n  font-size: 16px;\n}\n\n.diary-title-item {\n  margin-bottom: 24px;\n}\n\n.diary-title-input :deep(input) {\n  font-size: 18px;\n  height: 48px;\n  font-weight: 600;\n}\n\n.diary-content {\n  font-size: 15px;\n  line-height: 1.7;\n}\n\n.diary-content :deep(.el-textarea__inner) {\n  padding: 15px;\n  border-radius: 8px;\n  background-color: #fafafa;\n  border: 1px solid #e4e7ed;\n  transition: all 0.3s;\n  font-family: inherit;\n}\n\n.diary-content :deep(.el-textarea__inner:focus) {\n  background-color: #fff;\n  box-shadow: 0 0 10px rgba(64, 158, 255, 0.2);\n}\n\n.diary-toolbar {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-top: 8px;\n  margin-bottom: 15px;\n  padding: 10px 12px;\n  background-color: #E6F1FF;\n  border-radius: 8px;\n}\n\n.toolbar-group {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n\n.diary-image-count {\n  font-size: 14px;\n  color: #606266;\n}\n\n.weather-selector {\n  margin-top: 10px;\n}\n\n.weather-options {\n  display: flex;\n  gap: 15px;\n  margin-top: 10px;\n}\n\n.weather-option {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 10px 15px;\n  border-radius: 8px;\n  border: 1px solid #e4e7ed;\n  cursor: pointer;\n  transition: all 0.3s;\n}\n\n.weather-option:hover {\n  background-color: #E6F1FF;\n}\n\n.weather-option.active {\n  background-color: #DBECFF;\n  border-color: #409EFF;\n  color: #409EFF;\n}\n\n.weather-icon {\n  font-size: 22px;\n  margin-bottom: 5px;\n}\n\n.diary-upload {\n  margin-top: 20px;\n  padding: 15px;\n  background-color: #E6F1FF;\n  border-radius: 8px;\n  border: 1px dashed #c0c4cc;\n}\n\n.upload-title {\n  margin-bottom: 12px;\n  font-size: 15px;\n  color: #606266;\n  text-align: center;\n}\n\n.upload-area {\n  margin-top: 8px;\n}\n\n:deep(.upload-icon) {\n  font-size: 20px;\n  color: #909399;\n}\n\n:deep(.upload-text) {\n  margin-top: 8px;\n  color: #909399;\n}\n\n.post-options {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 16px;\n  margin-bottom: 16px;\n}\n\n.option-item {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  padding: 6px 12px;\n  border-radius: 16px;\n  background-color: #EBEEF5;\n  cursor: pointer;\n  transition: all 0.3s;\n  font-size: 14px;\n}\n\n.option-item:hover {\n  background-color: #DBECFF;\n}\n\n.option-item .el-icon {\n  font-size: 16px;\n  color: #909399;\n}\n\n.mood-selector {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 12px;\n  margin-top: 8px;\n}\n\n.mood-item {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 6px;\n  padding: 10px;\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.3s;\n  border: 1px solid #EBEEF5;\n}\n\n.mood-item:hover {\n  background-color: #E6F1FF;\n}\n\n.mood-item.active {\n  background-color: #DBECFF;\n  border-color: #409EFF;\n}\n\n.mood-emoji {\n  font-size: 24px;\n}\n\n.mood-text {\n  font-size: 12px;\n  color: #606266;\n}\n\n.dialog-footer {\n  display: flex;\n  justify-content: flex-end;\n  gap: 12px;\n  width: 100%;\n}\n\n@media (max-width: 768px) {\n  .posts-container {\n    padding: 16px;\n  }\n  \n  .page-title {\n    font-size: 24px;\n  }\n  \n  .page-subtitle {\n    font-size: 14px;\n  }\n  \n  .mood-selector {\n    grid-template-columns: repeat(2, 1fr);\n  }\n  \n  .diary-day {\n    font-size: 28px;\n  }\n  \n  .weather-options {\n    flex-wrap: wrap;\n  }\n}\n\n/* Ê∑ªÂä†ÁºñËæëÊåâÈíÆÊ†∑Âºè */\n.edit-button {\n  color: #409EFF;\n  cursor: pointer;\n  transition: all 0.3s;\n}\n\n.edit-button:hover {\n  color: #66b1ff;\n}\n</style> ","import script from \"./Posts.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Posts.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Posts.vue?vue&type=style&index=0&id=0dc2d5a7&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-0dc2d5a7\"]])\n\nexport default __exports__"],"names":["ossApi","getOSSConfig","api","get","getOSSPolicy","dir","params","uploadFile","file","policyRes","this","policy","Error","host","console","error","bucket","region","startsWith","formData","FormData","key","name","substring","lastIndexOf","append","accessKeyId","policyBase64","signature","log","axios","headers","cdnHost","fileUrl","uploadMultipleFiles","files","length","uploadPromises","map","async","index","fileUrls","Promise","all","usePostStore","defineStore","posts","ref","loading","fetchPosts","type","value","response","postApi","getPosts","ElMessage","addCustomPost","dataToSubmit","postData","createdAt","Date","toISOString","createPost","addPost","content","images","location","removePost","deletePost","id","filter","post","_id","success","updatePost","init","props","__props","sortedStories","computed","stories","sort","a","b","dateA","time","getTime","dateB","deleteDialogVisible","postToDelete","emit","__emit","formatDate","dateString","date","isNaN","warn","toLocaleDateString","month","day","formatTime","toLocaleTimeString","hour","minute","confirmDelete","editPost","story","__exports__","postStore","showPostDialog","locationVisible","weatherVisible","showMoodSelector","postType","activeFilter","isEditing","editingPostId","fileList","dialogImageUrl","dialogVisible","uploadLoading","newPost","title","uploadFiles","mood","weather","moods","emoji","text","getMoodText","moodValue","find","m","toggleMood","selectMood","isPostValid","trim","filteredPosts","Array","isArray","result","updatedAt","description","weatherEmoji","imageSrc","galleryImages","loadPosts","watch","resetForm","onMounted","handlePictureCardPreview","url","URL","createObjectURL","raw","handleFileChange","push","tempUrl","handleFileRemove","findIndex","f","splice","imageIndex","indexOf","uploadImages","imageUrls","message","scrollToUpload","document","getElementById","scrollIntoView","behavior","newVal","openPostDialog","status","handleSubmit","loadingInstance","ElLoading","service","lock","background","postImages","close"],"sourceRoot":""}