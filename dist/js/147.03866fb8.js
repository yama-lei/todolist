"use strict";(self["webpackChunkzhiyuxinsheng"]=self["webpackChunkzhiyuxinsheng"]||[]).push([[147],{5147:function(e,r,s){s.r(r),s.d(r,{default:function(){return F}});var o=s(6768),a=s(5130);const l={class:"reset-container"},n={class:"reset-card"},t={class:"reset-header"},u={class:"app-logo"},d={class:"reset-form"},i={class:"back-link"};function c(e,r,s,c,p,k){const m=(0,o.g2)("Sunny"),b=(0,o.g2)("el-icon"),f=(0,o.g2)("el-input"),w=(0,o.g2)("el-form-item"),g=(0,o.g2)("el-button"),h=(0,o.g2)("el-form"),F=(0,o.g2)("Back"),v=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",l,[(0,o.Lk)("div",n,[(0,o.Lk)("div",t,[(0,o.Lk)("div",u,[(0,o.bF)(b,{class:"logo-icon"},{default:(0,o.k6)((()=>[(0,o.bF)(m)])),_:1}),r[2]||(r[2]=(0,o.Lk)("h1",null,"植物日记",-1))]),r[3]||(r[3]=(0,o.Lk)("p",{class:"reset-subtitle"},"重置您的账户密码",-1))]),(0,o.Lk)("div",d,[r[6]||(r[6]=(0,o.Lk)("p",{class:"instruction"},"请设置您的新密码。密码应至少为6个字符，并包含数字和字母。",-1)),(0,o.bF)(h,{ref:"resetForm",model:c.resetForm,rules:c.rules,"label-position":"top",onKeyup:(0,a.jR)(c.handleSubmit,["enter"])},{default:(0,o.k6)((()=>[(0,o.bF)(w,{label:"新密码",prop:"password"},{default:(0,o.k6)((()=>[(0,o.bF)(f,{modelValue:c.resetForm.password,"onUpdate:modelValue":r[0]||(r[0]=e=>c.resetForm.password=e),type:"password",placeholder:"请输入新密码","prefix-icon":"Lock","show-password":"",clearable:""},null,8,["modelValue"])])),_:1}),(0,o.bF)(w,{label:"确认新密码",prop:"confirmPassword"},{default:(0,o.k6)((()=>[(0,o.bF)(f,{modelValue:c.resetForm.confirmPassword,"onUpdate:modelValue":r[1]||(r[1]=e=>c.resetForm.confirmPassword=e),type:"password",placeholder:"请再次输入新密码","prefix-icon":"Lock","show-password":"",clearable:""},null,8,["modelValue"])])),_:1}),(0,o.bF)(w,null,{default:(0,o.k6)((()=>[(0,o.bF)(g,{type:"primary",class:"submit-button",loading:c.authStore.loading,onClick:c.handleSubmit},{default:(0,o.k6)((()=>r[4]||(r[4]=[(0,o.eW)(" 重置密码 ")]))),_:1},8,["loading","onClick"])])),_:1})])),_:1},8,["model","rules","onKeyup"]),(0,o.Lk)("div",i,[(0,o.bF)(v,{to:"/login"},{default:(0,o.k6)((()=>[(0,o.bF)(b,null,{default:(0,o.k6)((()=>[(0,o.bF)(F)])),_:1}),r[5]||(r[5]=(0,o.eW)(" 返回登录页 "))])),_:1})])])])])}s(4114);var p=s(144),k=s(1387),m=s(14),b=s(7477),f=s(1219),w={name:"ResetPasswordPage",components:{Sunny:b.Sunny,Lock:b.Lock,Back:b.Back},setup(){const e=(0,k.rd)(),r=(0,k.lq)(),s=(0,m.n)(),o=(0,p.KR)(null),a=r.params.token,l=(0,p.Kh)({password:"",confirmPassword:""}),n=(e,r,s)=>{""===r?s(new Error("请再次输入密码")):r!==l.password?s(new Error("两次输入密码不一致")):s()},t={password:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:6,message:"密码长度至少为6个字符",trigger:"blur"}],confirmPassword:[{required:!0,validator:n,trigger:"blur"}]},u=async()=>{if(o.value)return a?void await o.value.validate((async r=>{if(!r)return f.nk.warning("请正确填写密码信息"),!1;try{await s.resetPassword({token:a,password:l.password}),f.nk.success("密码已成功重置，请使用新密码登录！"),setTimeout((()=>{e.push("/login")}),2e3)}catch(o){console.error("重置密码失败:",o)}})):(f.nk.error("无效的重置链接，请重新获取"),void e.push("/forgot-password"))};return{resetForm:o,resetForm:l,rules:t,authStore:s,handleSubmit:u}}},g=s(1241);const h=(0,g.A)(w,[["render",c],["__scopeId","data-v-ff66de68"]]);var F=h}}]);
//# sourceMappingURL=147.03866fb8.js.map